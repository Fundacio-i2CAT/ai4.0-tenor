function treeToTreeUI(a){var b=[];return Object.keys(a).forEach(function(c){var d={label:c,children:[],classes:["pop"]};Object.keys(a[c]).forEach(function(b){var e={label:b,children:[],classes:["layer"]};Object.keys(a[c][b]).forEach(function(a){var b={label:a,children:[],classes:["type"]};e.children.push(b)}),d.children.push(e)}),b.push(d)}),b}function createInfrRepoTreeModel2(a){console.log(a)}function createInfrRepoTreeModel(a){console.log(a);var b=[],c={},d=a.nodes;return Object.keys(d).forEach(function(a){var b=d[a];b.id=parseInt(a),void 0===c[b.pop]&&(console.log(b.pop),c[b.pop]={}),void 0===c[b.pop][b.layer]&&(c[b.pop][b.layer]={}),void 0!==b.type?(void 0===c[b.pop][b.layer][b.type]&&(c[b.pop][b.layer][b.type]=[]),c[b.pop][b.layer][b.type].push(b)):console.log(b)}),b.push(c),c}function createInfrRepoEdgesModel(a){var b=[],c={},d=a.edges;return Object.keys(d).forEach(function(a){var c={};c.from=parseInt(d[a][0].substring(1,d[a][0].length-1)),c.to=parseInt(d[a][1].substring(1,d[a][1].length-1)),c.label=d[a][2],b.push(c)}),b.push(c),b}function onClick(a){var b=new vis.DataSet,c=new vis.DataSet;console.log(a),b.add(ntdata.nodes),c.add(ntdata.links),console.log(b);var d,e=2,f=b.get({returnType:"Object"});if(0===a.nodes.length)for(d in f)f.hasOwnProperty(d)&&(f[d].color=void 0,void 0!==f[d].oldLabel&&(f[d].label=f[d].oldLabel,f[d].oldLabel=void 0),f[d].levelOfSeperation=void 0,f[d].inConnectionList=void 0);else{clearLevelOfSeperation(f);var g=a.nodes;storeLevelOfSeperation(g,0,f);for(var h=1;e+1>h;h++)appendConnectedNodes(g),storeLevelOfSeperation(g,h,f);for(d in f)f.hasOwnProperty(d)&&(f[d].inConnectionList===!0?(void 0!==f[d].levelOfSeperation&&f[d].levelOfSeperation>=2?f[d].color="rgba(150,150,150,0.75)":f[d].color=void 0,void 0!==f[d].oldLabel&&(f[d].label=f[d].oldLabel,f[d].oldLabel=void 0)):(f[d].color="rgba(200,200,200,0.5)",void 0===f[d].oldLabel&&(f[d].oldLabel=f[d].label,f[d].label="")))}var i=[];for(d in f)f.hasOwnProperty(d)&&i.push(f[d]);b.update(i)}function storeLevelOfSeperation(a,b,c){console.log("STORE SEPARATION"),console.log(a);for(var d=0;d<a.length;d++){var e=a[d];void 0===c[e].levelOfSeperation&&(c[e].levelOfSeperation=b),c[e].inConnectionList=!0}}function clearLevelOfSeperation(a){for(var b in a)a.hasOwnProperty(b)&&(a[b].levelOfSeperation=void 0,a[b].inConnectionList=void 0)}function appendConnectedNodes(a){for(var b=[],c=0;c<a.length;c++)b.push(a[c]);for(c=0;c<b.length;c++){var d=b[c];-1==a.indexOf(d)&&a.push(d);var e=graph.getConnectedNodes(d);addUnique(e,a)}b=null}function addUnique(a,b){for(var c=0;c<a.length;c++)-1==b.indexOf(a[c])&&b.push(a[c])}function dynamicSort(a){var b=1;return"-"===a[0]&&(b=-1,a=a.substr(1)),function(c,d){var e=c[a]<d[a]?-1:c[a]>d[a]?1:0;return e*b}}function containsObject(a,b,c){for(var d=0;d<b.length;d++)if(b[d][c]==a[c])return!0;return!1}function checkIfIsArray(a){return a instanceof Array?a:[a]}var tNovaAppConfig={useAuthTokenHeader:!0};angular.module("tNovaApp",["ui.router","ngSanitize","tNovaApp.config","tNovaApp.controllers","tNovaApp.directives","tNovaApp.services","smart-table","mgcrea.ngStrap","LocalStorageModule","cb.x2js","darthwade.dwLoading"]).config(["localStorageServiceProvider",function(a){a.setPrefix("tNovaApp").setStorageType("sessionStorage").setNotify(!0,!0)}]).config(["$stateProvider","$urlRouterProvider","$httpProvider",function(a,b,c){a.state("root",{"abstract":!0,controller:"rootCtrl",views:{"@":{templateUrl:"views/layout/tpl.common.html",controller:""},"header@root":{templateUrl:"views/layout/header.html",controller:"RootCtrl"},"sidebar@root":{templateUrl:"views/layout/sidebar.html",controller:"RootCtrl"},"main@root":{template:'<div ui-view="master"></div>',controller:"RootCtrl"},"footer@root":{templateUrl:"views/layout/footer.html",controller:"RootCtrl"}}}).state("login",{url:"/login",templateUrl:"views/user/login.html",controller:"AuthCtrl"}).state("root.profile",{url:"/profile",views:{"master@root":{templateUrl:"views/user/profile.html",controller:"ProfileCtrl"}}}).state("root.ns",{url:"/ns",views:{"master@root":{templateUrl:"views/t-nova/ns.html",controller:"nsController"}}}).state("root.vnf",{url:"/vnf",views:{"master@root":{templateUrl:"views/t-nova/vnf.html",controller:"vnfController"}}}).state("root.nsInstances",{url:"/nsInstances",views:{"master@root":{templateUrl:"views/t-nova/nsInstances.html",controller:"nsInstancesController"}}}).state("root.vnfInstances",{url:"/vnfInstances",views:{"master@root":{templateUrl:"views/t-nova/vnfInstances.html",controller:"vnfInstancesController"}}}).state("root.nsMonitoring",{url:"/nsMonitoring",views:{"master@root":{templateUrl:"views/t-nova/nsMonitoring.html",controller:"nsMonitoringController"}}}).state("root.nsMonitoring2",{url:"/nsMonitoring/:id",views:{"master@root":{templateUrl:"views/t-nova/nsMonitoring.html",controller:"nsMonitoringController"}}}).state("root.vnfMonitoring",{url:"/vnfMonitoring",views:{"master@root":{templateUrl:"views/t-nova/vnfMonitoring.html",controller:"vnfMonitoringController"}}}).state("root.vnfMonitoring2",{url:"/vnfMonitoring/:id",views:{"master@root":{templateUrl:"views/t-nova/vnfMonitoring.html",controller:"vnfMonitoringController"}}}).state("root.mappingAlgorithm",{url:"/mappingAlgorithm",views:{"master@root":{templateUrl:"views/t-nova/mappingAlgorithm.html",controller:"mappingAlgorithmController"}}}).state("root.infrastructureRepository",{url:"/infrastructureRepository",views:{"master@root":{templateUrl:"views/t-nova/infrastructureRepository.html",controller:"infrastructureRepositoryController"}}}).state("root.configuration",{url:"/configuration",views:{"master@root":{templateUrl:"views/t-nova/configuration.html",controller:"configurationController"}}}).state("root.modules",{url:"/modules",views:{"master@root":{templateUrl:"views/t-nova/modules.html",controller:"modulesController"}}}).state("root.nodes",{url:"/nodes",views:{"master@root":{templateUrl:"views/nodes.html",controller:"NodesCtrl"}}}).state("root.dashboard",{url:"/dashboard",views:{"master@root":{templateUrl:"views/index.html",controller:"HomeController"}}}),b.otherwise("/login"),c.interceptors.push(["$q","$rootScope","$location","$window",function(a,b,c,d){return{request:function(b){var c=0===b.url.indexOf("rest"),c=-1!==b.url.indexOf("login"),c=-1!==b.url.indexOf("rest/gk/api/token/");if(!c&&angular.isDefined(d.localStorage.token)){var e=d.localStorage.token;tNovaAppConfig.useAuthTokenHeader?b.headers["X-Auth-Token"]=e:b.url=b.url+"?token="+e}return b||a.when(b)}}}]),c.interceptors.push(["$q","$rootScope","$location","$window",function(a,b,c,d){return{responseError:function(e){var f=e.status,g=e.config,h=g.method,i=g.url;return Math.floor(Date.now()/1e3)>d.localStorage.expiration?b.logout():401===f&&null!==d.localStorage.token?c.path("/dashboard"):401===f?c.path("/login"):b.error=h+" on "+i+" failed with status "+f,a.reject(e)}}}])}]).run(["$window","$rootScope","$location","$state","AuthService",function(a,b,c,d,e){a.localStorage.userId&&(b.username=a.localStorage.username),a.localStorage.user&&(b.user=JSON.parse(a.localStorage.user)),b.logout=function(){console.log("logout"),a.localStorage.user&&(b.user=JSON.parse(a.localStorage.user)),e.logout(a.localStorage.token).then(function(){a.localStorage.clear(),c.path("/login")},function(a){b.error=a})},b.$on("$viewContentLoaded",function(b){!a.localStorage.token}),b.$on("$locationChangeStart",function(d,e,f){if(b.user){({user_id:b.user.id,view:c.path()})}"null"===a.localStorage.token&&"/register"!==c.path()&&"/recover_pass"!==c.path()&&c.path("/login")})}]);var services=angular.module("tNovaApp.services",["ngResource"]),graph,defaultTimer=5e4;angular.module("tNovaApp.config",[]).constant("BACKEND","http://localhost:9000").constant("AUTHENTICATION","http://10.10.1.63:8000").constant("TENOR","http://10.10.1.61:4000").constant("REPOSITORY","http://10.10.1.69:8888"),angular.module("tNovaApp.controllers",[]).controller("RootCtrl",["$scope","$rootScope",function(a,b){b.sidebarCollapse=!1,a.toggleSidebar=function(){b.sidebarCollapse=!b.sidebarCollapse}}]).controller("LockCtrl",function(){}),angular.module("tNovaApp.directives",[]).directive("fullHeight",["$window",function(a){return{restrict:"A",link:function(b,c,d){0|d.offset;c.css("min-height",a.innerHeight+"px"),angular.element(a).bind("resize",function(a){c.css("min-height",a.target.innerHeight+"px")})}}}]),angular.module("tNovaApp").controller("AuthCtrl",["$rootScope","$scope","$location","AuthService","$window",function(a,b,c,d,e){b.loginGKProcess=function(f,g){var h=1;d.loginGK(h,g).then(function(f){console.log(f),""!==f&&(e.localStorage.token=f.token.id,e.localStorage.expiration=f.token["valid-until"],d.profileGK(h,f.token.id).then(function(b){console.log(b),e.localStorage.user=JSON.stringify(b.info[0]),a.user=b.info[0],c.path("/dashboard")},function(a){console.log(a),b.loginError="Login failed"}))},function(b){a.loginError="Error with the Authentication module."})},b.login=function(){var c=b.username,d=b.password;a.username=c,c&&d?b.loginGKProcess(c,d):b.loginError="Username and password required"}}]),angular.module("tNovaApp").controller("UsersController",["$scope","$resource","UserService",function(a,b,c){console.log("Request"),c.list(function(a){console.log(a)});var d=b("/rest/user/");console.log(d),a.users=d.query(),a.addUser=function(){d.save({name:a.name,lastName:a.lastName}),a.users=d.query(),a.name=a.lastName=""}}]).controller("UserProfileController",["$scope","$resource","UserService",function(a,b,c){c.get(function(b){console.log(b),console.log(b.name),a.user=b})}]),angular.module("tNovaApp").controller("HomeController",["$scope","tenorService",function(a,b){a.nsSize=a.vnfSize=a.instancesSize=0,b.get("network-services").then(function(b){void 0!==b&&(a.nsSize=b.length)}),b.get("vnfs").then(function(b){void 0!==b&&(a.vnfSize=b.length)}),b.get("ns-instances").then(function(c){void 0!==c&&(a.instancesSize=c.length),b.get("vnf-instances").then(function(b){void 0!==b&&(a.instancesSize=a.instancesSize+b.length)})}),a.summaryData={},a.summaryData.ns_created_requests=0,a.summaryData.ns_instantiated_requests=0,a.summaryData.ns_terminated_requests=0,a.summaryData.ns_updated_requests=0,a.summaryData.vnf_created_requests=0,a.summaryData.ns_scaling_requests=0,a.summaryData.ns_scaling_actions=0,a.summaryData.SLA_breaches=0,a.summaryData.SM_request=0,a.summaryData.SM_rate=0,a.summaryData.SM_execution_time=0,console.log(a.summaryData),b.get("statistics").then(function(b){console.log(b),b&&b.forEach(function(b){console.log(b),a.summaryData[b.name]=b.value,console.log(a.summaryData)})}),a.reset=function(b){a.summaryData[b]=0},a.info=function(a){},a.tooltipUrl="bower_components/angular-strap/src/tooltip/tooltip.tpl.html",a.ns_created={title:"Measures the number of NS creation requests."},a.ns_instantiated={title:"Measures the number of NS instantiation requests."},a.ns_terminated={title:"Measures the number of NS termination requests."},a.ns_updated={title:"Measures the number of update NS requests received."},a.vnf_created={title:"Measures the number of create VNF requests received from the NF Store."},a.ns_scaling_requests={title:"Provides information on the number of manually triggered NS Scaling requests have been received."},a.ns_scaling_actions={title:"Provides information on the number of automatically triggered NS Scaling requests within the orchestrator."},a.SLA_breaches={title:"Provides information on the number of SLA breaches measured by the SLA enforcement module of the orchestrator."},a.SM_request={title:"Number of service mapping requests performed to the algorithm."},a.SM_rate={title:"Percentage of the successful mapping requests completed."},a.SM_execution_time={title:"The average execution time of a mapping request."},a.lastLogs=function(){var c="elastic/_search?pretty=1&sort=_index:desc&size=11";b.get(c).then(function(b){b&&(console.log(b.hits.hits),a.lastHistory=b.hits.hits,console.log(b.hits.hits[0]),console.log(b.hits.hits[1]))})},a.lastLogs()}]),angular.module("tNovaApp").controller("nsController",["$scope","$stateParams","$filter","tenorService","$interval","$modal",function(a,b,c,d,e,f){a.getServiceList=function(){d.get("network-services").then(function(b){a.dataCollection=b})},a.getServiceList();var g=e(function(){a.getServiceList()},defaultTimer);a.deleteDialog=function(b){a.itemToDeleteId=b,f({title:"Are you sure you want to delete this item?",template:"views/t-nova/modals/delete.html",show:!0,scope:a})},a.deleteItem=function(b){d["delete"]("network-services/"+b).then(function(b){a.getServiceList()}),this.$hide()},a.showDescriptor=function(b){a.jsonObj=JSON.stringify(b,void 0,4),f({title:"Network Service Descriptor - "+b.id,content:JSON.stringify(b,void 0,4),template:"views/t-nova/modals/descriptors.html",show:!0,scope:a})},a.$on("$destroy",function(){g&&e.cancel(g)}),a.instantiateDialog=function(b){a.nsd=b,a.object={},a.object.ns_id=b.id,a.object.callbackUrl="https://httpbin.org/post",f({title:"Instantiation - "+b.id,template:"views/t-nova/modals/nsInstantiation.html",show:!0,scope:a})},a.instantiate=function(a){console.log(a),d.post("ns-instances",a).then(function(a){console.log(a)}),this.$hide()},a.terminate=function(a){console.log("Terminate Network Service")}}]).controller("nsInstancesController",["$scope","$location","$stateParams","$filter","tenorService","$interval","$modal",function(a,b,c,d,e,f,g){var h;a.go=function(a){b.path(a)},a.data=[],a.updateInstanceList=function(){e.get("ns-instances").then(function(b){b=b.reverse(),a.dataCollection=b})},a.updateInstanceList();var h=f(function(){a.updateInstanceList()},12e4);a.stop=function(a){e.put("ns-instances/"+a+"/stopped","").then(function(a){})},a.start=function(a){e.put("ns-instances/"+a+"/start","").then(function(a){})},a.deleteDialog=function(b){a.itemToDeleteId=b,g({title:"Are you sure you want to delete this item?",template:"views/t-nova/modals/delete.html",show:!0,scope:a})},a.deleteItem=function(b){e["delete"]("ns-instances/"+b).then(function(b){a.updateInstanceList()}),this.$hide()},a.$on("$destroy",function(){h&&f.cancel(h)}),a.showDescriptor=function(b){a.d=b,a.d.mapping_total_time=Date.parse(a.d.mapping_time)-Date.parse(a.d.created_at),a.d.instantiation_total_time=Date.parse(a.d.instantiation_end_time)-Date.parse(a.d.created_at),a.jsonObj=JSON.stringify(b,void 0,4),g({title:"Network Service Instance Descriptor - "+b.id,content:JSON.stringify(b,void 0,4),template:"views/t-nova/modals/info/nsInstance.html",show:!0,scope:a})}}]).controller("nsMonitoringController",["$scope","$stateParams","$filter","mDataService","$interval","tenorService",function(a,b,c,d,e,f){var g;a.instanceId=b.id,b.id&&f.get("ns-instances/"+b.id).then(function(b){a.instanceId=b.instance_id}),a.rtt_metric=[],a.packet_loss=[],a.response_time=[],a.ram_consumption=[],a.availability=[],a.rtt_metric.push(),d.get(b.id).then(function(b){a.mData=b}),a.mem_percent=40;var h=e(function(){a.cpu_percent=Math.floor(Math.random()*a.cpu_percent+20);var b=Math.floor(2*Math.random());b*=1==Math.floor(2*Math.random())?1:-1,a.mem_percent=a.mem_percent+b;var c=(Math.floor(100*Math.random()+1),vis.moment());a.rtt_metric.push({x:c,y:Math.floor(100*Math.random()+1)}),a.packet_loss.push({x:c,y:Math.floor(100*Math.random()+1)}),a.response_time.push({x:c,y:Math.floor(100*Math.random()+1)}),a.ram_consumption.push({x:c,y:Math.floor(100*Math.random()+1)}),a.availability.push({x:c,y:100});Math.floor(100*Math.random()+1),Math.floor(100*Math.random()+1);a.tableData=[{type:"Ram Consumption",value:a.ram_consumption[a.ram_consumption.length-1].y,valueType:"MB"},{type:"Availability",value:a.availability[a.availability.length-1].y,valueType:"%"}]},defaultTimer);a.options={},a.showGraph=function(b){e.cancel(g),a.graph_name=b,a.monitoringData.clear(),g=e(function(){"Round Trip Time"==b&&(a.data=a.rtt_metric),"Packet loss"==b&&(a.data=a.packet_loss),"Response time"==b&&(a.data=a.response_time),"Ram Consumption"==b&&(a.data=a.ram_consumption),"Availability"==b&&(a.data=a.availability);a.monitoringData.length+1,Math.round(100*Math.random());a.monitoringData.add(a.data[a.data.length-1])},2e3)},a.graph_name="",a.monitoringData=new vis.DataSet,a.$on("$destroy",function(){g&&e.cancel(g),h&&e.cancel(h)})}]),angular.module("tNovaApp").controller("vnfController",["$scope","$stateParams","$filter","tenorService","$interval","$modal",function(a,b,c,d,e,f){a.getVnfList=function(){d.get("vnfs").then(function(b){a.dataCollection=b})},a.getVnfList();var g=e(function(){a.getVnfList()},defaultTimer);a.deleteDialog=function(b){a.itemToDeleteId=b,f({title:"Are you sure you want to delete this item?",template:"views/t-nova/modals/delete.html",show:!0,scope:a})},a.deleteItem=function(b){d["delete"]("vnfs/"+b).then(function(b){a.getVnfList()}),this.$hide()},a.showDescriptor=function(b){a.jsonObj=JSON.stringify(b,void 0,4),f({title:"Virtual Network Function Descriptor - "+b.name,content:JSON.stringify(b,void 0,4),template:"views/t-nova/modals/descriptors.html",show:!0,scope:a})},a.$on("$destroy",function(){g&&e.cancel(g)})}]).controller("vnfInstancesController",["$scope","$location","$filter","tenorService","$interval","$modal",function(a,b,c,d,e,f){var g;a.go=function(a){b.path(a)},a.data=[],a.updateInstanceList=function(){d.get("vnf-provisioning/vnf-instances").then(function(b){a.data=b,a.dataCollection=b})},a.updateInstanceList();var g=e(function(){a.updateInstanceList()},12e4);a.stop=function(a){3===a.status?a.status=0:0===a.status&&(a.status=3)},a["delete"]=function(a){},a.$on("$destroy",function(){g&&e.cancel(g)}),a.showDescriptor=function(b){a.d=b,a.jsonObj=JSON.stringify(b,void 0,4),console.log(b),f({title:"VNF Instance Descriptor - "+b._id,content:JSON.stringify(b,void 0,4),template:"views/t-nova/modals/info/vnfInstance.html",show:!0,scope:a})}}]).controller("vnfMonitoringController",["$scope","$stateParams","$filter","mDataService","$interval","tenorService",function(a,b,c,d,e,f){var g;a.instanceId=b.id,b.id&&f.get("vnf-instance/"+b.id).then(function(b){a.instanceId=b.instance_id}),a.metric,a.reloadGraph=function(c){e.cancel(g),a.graph_name=c,a.monitoringData.clear(),g=e(function(){console.log(a.monitoringData);var d;d=0===a.monitoringData.length?"instances/"+b.id+"/monitoring-data/?instance_type=vnf&metric="+c:"instances/"+b.id+"/monitoring-data/?instance_type=vnf&metric="+c+"&start="+a.monitoringData.get(a.monitoringData.length-1).date,f.get(d).then(function(b){console.log(b),angular.forEach(b,function(b){b.id=a.monitoringData.length,b.x=b.date,b.y=Math.floor(b.value),a.monitoringData.add(b)})})},1e4)},a.monitoringData=new vis.DataSet,a.reloadGraph("memfree"),a.rtt_metric=[],a.packet_loss=[],a.response_time=[],a.rtt_metric.push(),d.get(b.id).then(function(b){a.mData=b}),a.mem_percent=40;var h=e(function(){a.cpu_percent=Math.floor(Math.random()*a.cpu_percent+20);var b=Math.floor(2*Math.random());b*=1==Math.floor(2*Math.random())?1:-1,a.mem_percent=a.mem_percent+b;var c;Math.floor(100*Math.random()+1);c=vis.moment(),a.rtt_metric.push({x:c,y:Math.floor(100*Math.random()+1)}),a.packet_loss.push({x:c,y:Math.floor(100*Math.random()+1)}),a.response_time.push({x:c,y:Math.floor(100*Math.random()+1)});Math.floor(100*Math.random()+1),Math.floor(100*Math.random()+1);a.tableData=[{type:"Round Trip Time",value:a.rtt_metric[a.rtt_metric.length-1].y,valueType:"ms"},{type:"Packet loss",value:a.packet_loss[a.packet_loss.length-1].y,valueType:"%"},{type:"Response time",value:a.response_time[a.response_time.length-1].y,valueType:"ms"}]},2e3);a.options={},a.showGraph=function(b){e.cancel(g),a.graph_name=b,a.monitoringData.clear(),g=e(function(){"Round Trip Time"==b&&(a.data=a.rtt_metric),"Packet loss"==b&&(a.data=a.packet_loss),"Response time"==b&&(a.data=a.response_time);a.monitoringData.length+1,Math.round(100*Math.random());a.monitoringData.add(a.data[a.data.length-1])},2e3)},a.graph_name="",a.monitoringData=new vis.DataSet,a.$on("$destroy",function(){g&&e.cancel(g),h&&e.cancel(h)})}]),angular.module("tNovaApp").controller("infrastructureRepositoryController",["$rootScope","$scope","$http","$q","localStorageService","$interval","$modal","$timeout","infrRepoService","$loading",function(a,b,c,d,e,f,g,h,i,j){var k="";b.showPop=!1,b.rootElement={},b.tree=[],b.infrModel=[],b.physicalResources=!1,b.virtualResources=!1,b.showTopology=!1,b.ui_handler=function(a,c){var d;console.log(a+" "+c),"pop"===c&&b.tree.forEach(function(c){console.log(c),c.uid===a&&(d=c,b.my_tree_handler(d))})},b.my_tree_handler=function(c){b.topologyData={},"pop"===c.classes[0]&&(b.showPop=!1,b.showLayers=!0,b.showTopology=!1,h(function(){b.$broadcast("rootElements",a.rootElement[c.label])}))},b.generateGraph=function(c){b.showTables=!1,void 0===c&&(c=0),console.log("Generate graph"),b.showLayers=!1,b.showTopology=!0;var d={};d.nodes=[],d.edges=[];var e=a.rootElement["Intel Ireland's Leixlip Campus, Kildare, Ireland"],e=b.infrModel[c];for(var f in e.resources)if(console.log(f),"virtual_resource"===f)for(var g in e.resources[f])console.log(e.resources[f][g]),e.resources[f][g].forEach(function(a){console.log(a),d.nodes.push({id:a.id,label:a["occi.epa.resource_type"],group:a["occi.epa.index_type"]})});d.links=a.edges,h(function(){a.$broadcast("completeTopologyData",d)})},b.selectedLayer=[{name:"virtual",id:0,isChecked:!1},{name:"physical",id:1,isChecked:!1},{name:"service",id:2,isChecked:!1},{name:"vnf",id:3,isChecked:!1}],b.filter=function(){var c={};c.nodes=[],c.edges=[];for(var d=a.rootElement["Intel Ireland's Leixlip Campus, Kildare, Ireland"],e=0;e<b.selectedLayer.length;e++)if(b.selectedLayer[e].isChecked===!0){var f=b.selectedLayer[e].name;for(var g in d[f])d[f][g].forEach(function(a){c.nodes.push({id:a.id,label:a.type,group:a.layer})})}c.links=a.edges,h(function(){a.$broadcast("completeTopologyData",c)})},b.types=[],b.getTypes=function(){k="-/",i.get(k).then(function(a){a.forEach(function(a){b.types.push({id:a.term,location:a.location})})})["finally"](function(){console.log("END")})},b.getTypes(),b.virtualType=["stack","vm","port","net","volume","snapshot","floatingip","router","controller","hypervisor","cinder"],b.physicalType=["machine","bridge","pcidev","osdev","socket","cache","core","core","pu"],b.getPops=function(){j.start("pops"),b.showPops=!0,b.showPop=!1,k="pop/",i.get(k).then(function(a){b.pops=a,0===a.length&&j.finish("pops"),b.infrModel=[],angular.forEach(a,function(a,c,d){k=a.identifier.slice(1),i.get(k).then(function(a){b.infrModel.push(a.attributes),b.infrModel[b.infrModel.length-1].resources={},b.infrModel[b.infrModel.length-1].resources.physical_resource={},b.infrModel[b.infrModel.length-1].resources.virtual_resource={},angular.forEach(b.virtualType,function(a){b.infrModel[b.infrModel.length-1].resources.virtual_resource[a]=[]}),angular.forEach(b.physicalType,function(a){b.infrModel[b.infrModel.length-1].resources.physical_resource[a]=[]}),j.finish("pops")})})})},b.getPops(),b.getResourcesByType=function(a,c){j.start("table");var c=b.types.filter(function(a){return a.id===c})[0];b.showPops=!1,b.showPop=!0,b.showTables=!0,k="pop/"+b.infrModel[a]["occi.epa.popuuid"]+c.location,i.get(k).then(function(d){0===d.length&&j.finish("table"),b.dataCollection=[],angular.forEach(d,function(d){i.get(d.identifier.slice(1)).then(function(d){void 0===b.infrModel[a][d.attributes["occi.epa.index_type"]]&&(b.infrModel[a][d.attributes["occi.epa.index_type"]]=[]),void 0===b.infrModel[a][d.attributes["occi.epa.index_type"]][c.id]&&(b.infrModel[a][d.attributes["occi.epa.index_type"]][c.id]=[]),void 0!==d.attributes["occi.epa.index_type"]&&b.infrModel[a][d.attributes["occi.epa.index_type"]][c.id].push(d.attributes),b.dataCollection.push(d.attributes),j.finish("table")})})})},b.showResources=function(a){b.showTables=!0,"phy"===a&&(b.physicalResources=!0,b.virtualResources=!1),"virt"===a&&(b.physicalResources=!1,b.virtualResources=!0)},b.getPoP=function(a){b.showPops=!1,b.showPop=!0,b.pop={},console.log(a),b.pop=b.infrModel[a],b.pop.id=a},b.getResourcesByPoP=function(a){b.showPops=!1,b.showPop=!0,angular.forEach(b.types,function(c){c.id.indexOf("link")>-1||(k="pop/"+b.infrModel[a]["occi.epa.popuuid"]+c.location,i.get(k).then(function(d){angular.forEach(d,function(d,e,f){i.get(d.identifier.slice(1)).then(function(d){void 0===b.infrModel[a].resources[d.attributes["occi.epa.index_type"]]&&(b.infrModel[a].resources[d.attributes["occi.epa.index_type"]]=[]),void 0===b.infrModel[a].resources[d.attributes["occi.epa.index_type"]][c.id]&&(b.infrModel[a].resources[d.attributes["occi.epa.index_type"]][c.id]=[]),void 0!==d.attributes["occi.epa.index_type"]&&b.infrModel[a].resources[d.attributes["occi.epa.index_type"]][c.id].push(d.attributes),console.log(e)})})}))})},b.showDescriptor=function(a){b.jsonObj=JSON.stringify(JSON.parse(a),void 0,4),g({title:"Attributes",content:"",template:"views/t-nova/modals/descriptors.html",show:!0,scope:b})},b.panels=[{title:"Collapsible Group Item #1",body:""},{title:"Collapsible Group Item #2",body:""}],b.panels.activePanel,b.startLoading=function(a){j.start(a)},b.finishLoading=function(a){j.finish(a)},b.options={active:!1,text:"",className:"",overlay:!0,spinner:!0,spinnerOptions:{lines:12,length:7,width:4,radius:10,rotate:0,corners:1,color:"#000",direction:1,speed:2,trail:100,opacity:.25,fps:20,zIndex:2e9,className:"dw-spinner",top:"auto",left:"auto",position:"relative"}}}]).controller("popLayer",["$rootScope","$scope","$filter","$modal",function(a,b,c,d){b.tableDisplay=!1,b.showTable=function(c,d){b.data=[],console.log("Show table: "+c+" - "+d),b.data=a.rootElement["Intel Ireland's Leixlip Campus, Kildare, Ireland"][c][d],console.log("Table reload"),b.tableDisplay?b.tableParams.reload():(console.log("inside"),b.tableDisplay=!0,b.showTable2())},b.showTable2=function(){console.log("Show table"),b.tableDisplay=!0,b.tableParams=new ngTableParams({count:b.data.length,sorting:{id:"desc"}},{total:b.data.length,getData:function(a,d){console.log("GEt Data"),console.log(b.data);var e=d.sorting()?c("orderBy")(b.data,d.orderBy()):b.data;a.resolve(e.slice((d.page()-1)*d.count(),d.page()*d.count()))},$scope:{$data:{}}})},b.showDescriptor=function(a){b.jsonObj=JSON.parse(a),d({title:"Attributes",content:"",template:"partials/t-nova/modals/descriptors.html",show:!0,scope:b})}}]),angular.module("tNovaApp").controller("mappingAlgorithmController",["$scope","tenorService",function(a,b){var c=[],d=0,e=0,f=0,g=0;a.scatterData=[];var h=new vis.DataSet;h.add({id:0,content:"Time",options:{drawPoints:{enabled:!0,size:6,style:"circle"},style:"points"}}),h.add({id:1,content:"Average",options:{drawPoints:!1}}),a.options={legend:!0,sort:!0,sampling:!1,dataAxis:{title:{left:{text:"Instantiation time (ms)"}},customRange:{left:{},showMinorLabels:!0},left:{format:function(a){return""+a.toPrecision(3)}}},defaultGroup:"Scatterplot",height:"300px"};var i=[];a.data={items:new vis.DataSet(i),groups:h},b.get("ns-instances").then(function(b){c=b,console.log(c.length);for(var h,i=0,j=0;j<=c.length-1;j++)if(h=c[j],d=d+Date.parse(h.mapping_time)-Date.parse(h.created_at),h.instantiation_end_time&&(i++,e=e+Date.parse(h.instantiation_end_time)-Date.parse(h.instantiation_start_time),f=f+Date.parse(h.instantiation_end_time)-Date.parse(h.created_at),g=g+(Date.parse(h.instantiation_end_time)-Date.parse(h.created_at))^2,a.data.items.add({x:Date.parse(h.created_at),y:f,group:0})),j===c.length-1){d/=c.length,e/=i,f/=i,g/=i;var k=0,l=0;a.data.items.forEach(function(b){if(l+=b.y,3===k){var c={};c.x=b.x,c.y=l/4,c.group=1,k=0,l=0,a.data.items.add(c)}else k++})}}),a.monitoringData=[{x:new Date("2015","01","11","14","50","55"),y:14,group:0},{x:new Date("2015","01","12","14","50","55"),y:25,group:0},{x:new Date("2015","01","16","14","50","55"),y:30,group:0},{x:new Date("2015","01","11","14","50","55"),y:12,group:1},{x:new Date("2015","01","12","14","50","55"),y:15,group:1},{x:new Date("2015","01","16","14","50","55"),y:12,group:1},{x:new Date("2015","01","11","14","50","55"),y:2,group:2},{x:new Date("2015","01","12","14","50","55"),y:13,group:2},{x:new Date("2015","01","16","14","50","55"),y:18,group:2}],a.chart_options={data:[{label:"Mapped",value:20},{label:"Requested",value:30},{label:"Rejected",value:10}]}}]),angular.module("tNovaApp").controller("configurationController",["$scope","$filter",function(a,b){}]),angular.module("tNovaApp").controller("postmanController",["$scope","nsService","vnfService","$modal","$http",function(a,b,c,d,e){a.sendPOST=function(d){if(console.log(d),""===d.jsonTemplate.name)return void(a.post.response="Invalid name");if(""===d.jsonTemplate.state)return void(a.post.response="Invalid state");if("VNF"===a.selectedType?d.url="apis.t-nova.eu/orchestrator/vnfs":"NS"===a.selectedType&&(d.url="apis.t-nova.eu/orchestrator/network-services"),"apis.t-nova.eu/orchestrator/network-services"===d.url){if(""===d.jsonTemplate.version)return void(a.post.response="Invalid version");b.post(d.jsonTemplate).then(function(b,c){console.log(c),a.post.response="Inserted correctly"})}else"apis.t-nova.eu/orchestrator/vnfs"===d.url&&c.post(d.jsonTemplate).then(function(b,c){console.log(c),a.post.response="Inserted correctly"})},a.selectType=["VNF","NS"],a.selectTemplates=[{ns_id:"ns-eucnc",name:"NS name",description:"eUCNC Demo",vendor:"",version:"1.0",vnfs:["1"],vnffgd:null,vld:null,vnf_dependencies:["1"],lifecycle_events:[{initialization:"URI for the initialization script"},{termination:"URI for the termination script"},{scaling:"URI for the scaling script"}],auto_scale_policy:null,created_at:"2015-06-22T14:03:16.463Z",updated_at:"2015-06-22T14:03:16.463Z",monitoring_parameters:[{id:1,name:"availability",description:"Percentage of time the NS has been available over the last 365 days",definition:null,unit:"%",ns_id:1},{id:2,name:"ram-consumption",description:"Amount of RAM memory consumed by the service",definition:null,unit:"MB",ns_id:1}],service_deployment_flavour:[{id:1,flavour_key:"",ns_id:1,constituent_vnf:[{id:1,vnf_reference:"1",vnf_flavour_id_reference:"",redundancy_model:"",affinity:"",capability:"",number_of_instances:""}]}],assurance_parameters:[{id:1,param_id:"availability",value:"GT(min(vnfs[1].availability, vnfs[2].availability))",ns_id:1,violation:{id:1,breaches_count:"5",interval:"120",penalty:"not included, as they're not relevant to the Orchestrator"}},{id:2,param_id:"ram-consumption",value:"LT(add(vnfs[1].memory-consumption, vnfs[2].memory-consumption, 100))",ns_id:1,violation:{id:2,breaches_count:"5",interval:"120",penalty:"not included, as they're not relevant to the Orchrstrator"}}],connection_points:[{id:1,name:null,ns_id:1}]},{id:"vnf",type:"Virtual Network Function",content:{vnf_id:"vnf1",vendor:"NCSRD",descriptor_version:"1.0.0",version:"",vdus:[{vm_image:"DPI.qcow2",computation_requirements:"High",lifecycle_event:" ",constraint:" ",high_availability:"0",scale_in_out:"0",OpenStack_Flavour:"to be added",hypervisor:{hypervisor_type:"QEMU",hypervisor_version:"1.0.0.6.0.0.2",hypervisor_address_translation_support:" "},cpu:{cpu_instruction_set_extension:"VMX",cpu_model:"Intel E5-2680 v2",cpu_core_reservation:"2"},memory:{number_of_large_pages_required_per_vdu:"2"},vnfc:{connection_point:[{virtual_link_reference:"eth0",virtual_network_bandwidth:"10",type:"external"},{virtual_link_reference:"eth1",virtual_network_bandwidth:"10",type:"internal"}]}}],deployment_flavour:{flavour_key:"1",constituent_vdu:[{vdu_reference:"1",number_of_instances:"1",constituent_vnfc:"1"}]},auto_scale_policy:"",manifest_file:"",manifest_file_security:""}}],a.post={},a.post.jsonTemplate="",a.post.url="http://84.88.40.198:8000/api/",a.post.response="",a.selectedItem={},a.openPostman=function(){a.selectedIcon="POST",d({title:"REST Client",content:"",template:"partials/t-nova/modals/postman.html",show:!0,scope:a})},a.update=function(){console.log(a.selectedItem),console.log(a.selectedItem.content),a.post.jsonTemplate=a.selectedItem.content,"ns"===a.selectedItem.id?a.post.url="http://84.88.40.198:8000/api/network-services":"vnf"===a.selectedItem.id&&(a.post.url="http://84.88.40.198:8000/api/virtual-network-functions");
},a.loadFile=function(b){a.$apply(function(c){var d=b.files[0],e=new FileReader;e.onload=function(b){a.post.jsonTemplate=e.result},e.readAsText(d)})}}]),angular.module("tNovaApp").controller("modulesController",["$scope","$filter","tenorService","$interval","$modal",function(a,b,c,d,e){a.updateModulesList=function(){c.get("configs/services").then(function(b){void 0!==b&&(a.modulesCollection=b)})},a.updateModulesList();var f=d(function(){a.updateModulesList},defaultTimer);a.deleteDialog=function(b){a.itemToDeleteId=b,e({title:"Are you sure you want to delete this item?",template:"partials/t-nova/modals/delete.html",show:!0,scope:a})},a.deleteItem=function(a){c["delete"]("configs/services?name="+a).then(function(a){}),this.$hide()},a.$on("$destroy",function(){f&&d.cancel(f)}),a.registerService=function(a){console.log("register service"),console.log(a),c.post("configs/registerService",JSON.stringify(a)).then(function(a){})},a.options={start:new Date,zoomMin:1e3,zoomMax:7776e6,height:"300px"};var g=[];a.timeline=[],a.data={items:new vis.DataSet(g)},a.timeLine=[];var h="_cat/indices?";h="elastic/*/_stats/store",c.get(h).then(function(b){if(b){var c=Object.keys(b.indices);angular.forEach(c,function(b){a.timelineLog(b)})}}),a.timelineLog=function(b){var d="elastic/"+b+"/_search?pretty=1&q=*&size=50";c.get(d).then(function(b){b&&(a.log=a.log.concat(b.hits.hits),angular.forEach(b.hits.hits,function(b){a.data.items.add({id:b.id,content:b._source.module+" - "+b._source.message,start:new Date(b._source["@timestamp"]).getTime(),type:"point"})}))})},a.selectedSeverity="",a.log=[],a.severities=["ERROR","DEBUG","INFO"],a.selectSeverity=function(b){a.data.items.clear(),console.log(a.selectedSeverity),h="elastic/_search?pretty=1&size=200&q=severity:"+a.selectedSeverity,c.get(h).then(function(b){a.log=b.hits.hits,b&&angular.forEach(b.hits.hits,function(b){a.data.items.add({id:b.id,content:b._source.module+" - "+b._source.message,start:new Date(b._source["@timestamp"]).getTime(),type:"point"})})})}}]),angular.module("tNovaApp").factory("AuthService",["$http","$window","$q","BACKEND","AUTHENTICATION",function(a,b,c,d,e){var f=function(b,d){var f="rest/gk/api/token/",g=c.defer();return a.post(f,"",{headers:{"Content-Type":"application/json","X-Auth-Password":d,"X-Auth-Uid":b,"X-host":e}}).then(function(a){console.log(a),g.resolve(a.data)},function(a){console.log(a),g.reject(a.data)}),g.promise},g=function(b,d){var f="rest/gk/api/admin/user/"+b,g=c.defer();return a.get(f,{headers:{"Content-Type":"application/json","X-Auth-Token":d,"X-host":e}}).then(function(a){console.log(a),g.resolve(a.data)},function(a){console.log(a),g.reject(a.data)}),g.promise},h=function(d){var f=c.defer(),g="rest/gk/api/token/"+d;return a["delete"](g,{headers:{"X-host":e}}).then(function(a){b.localStorage.removeItem("token"),b.localStorage.removeItem("username"),console.log(a),f.resolve(a.data)},function(a){console.log(a),f.resolve(a.data)}),f.promise};return{logout:function(a){return h(a)},loginGK:function(a,b){return f(a,b)},profileGK:function(a,b){return g(a,b)}}}]),services.factory("HistoryService",["$resource",function(a){return a("rest/history/:id",{id:"@id"})}]),services.factory("mDataService",["$http",function(a){return{list:function(){var b=a.get("rest/mData").then(function(a){return a.data},function(a){});return b},get:function(b){var c=a.get("rest/mData/"+b).then(function(a){return a.data},function(a){});return c}}}]),services.factory("infrRepoService",["$http","REPOSITORY",function(a,b){return{get:function(c){var d=a.get("rest/api/"+c,{headers:{Accept:"application/occi+json","X-host":b}}).then(function(a){return a.data},function(a){});return d}}}]),services.factory("tenorService",["$http","TENOR",function(a,b){return{get2:function(c){return a.get("rest/api/"+c,{headers:{"X-host":b}})},get:function(c){var d=a.get("rest/api/"+c,{headers:{"X-host":b}}).then(function(a){return a.data},function(a){});return d},post:function(c,d){console.log(d);var e=a.post("rest/api/"+c,d,{headers:{"X-host":b,"Content-Type":"application/json"}}).then(function(a){return console.log(a),a.data},function(a){});return e},put:function(c,d){var e=a.put("rest/api/"+c,d,{headers:{"X-host":b}}).then(function(a){return a.data},function(a){});return e},"delete":function(c){var d=a["delete"]("rest/api/"+c,{headers:{"X-host":b}}).then(function(a){return a.data},function(a){});return d}}}]),angular.module("tNovaApp").factory("AuthInterceptor",["$rootScope","$q","$window","$location",function(a,b,c,d){return{request:function(a){return a.headers=a.headers||{},c.localStorage.token&&(a.headers.Authorization="Token "+c.localStorage.token),a},responseError:function(a){return 401===a.status?(c.localStorage.removeItem("token"),c.localStorage.removeItem("username"),void d.path("/login")):b.reject(a)}}}]),angular.module("tNovaApp").directive("restrict",["$window",function(a){return{restrict:"A",prioriry:1e5,scope:!1,link:function(){},compile:function(b,c){var d=!0;if(console.log(c.access),"function"==typeof c.access.includes)if(c.access.includes(" "))var e=c.access.split(" ");else var e=[c.access];else if(c.access.contains(" "))var e=c.access.split(" ");else var e=[c.access];if(void 0!==a.localStorage.userRoles){if("function"==typeof c.access.includes){if(a.localStorage.userRoles.includes(" "))var f=a.localStorage.userRoles.split(" ")}else if(a.localStorage.userRoles.contains(" "))var f=a.localStorage.userRoles.split(" ");for(var g in e)for(var h in f)f[h]===e[g]&&(d=!1);d&&(b.children().remove(),b.remove())}}}}]),angular.module("tNovaApp").directive("linearChart",["$parse","$window",function(a,b){return{restrict:"EA",template:"<svg width='"+$("#graphChart").width()+"' height='200'></svg>",link:function(c,d,e){function f(){o[o.length-1].second/o[0].second>u&&u++,i=r.scale.linear().domain([u,o[o.length-1].second]).range([p+5,s.attr("width")-p]),j=r.scale.linear().domain([0,r.max(o,function(a){return a.metric1})]).range([s.attr("height")-p,0]),k=r.svg.axis().scale(i).orient("bottom").ticks(o.length-1).tickFormat(r.format("d")),l=r.svg.axis().scale(j).orient("left").ticks(5),m=r.svg.line().x(function(a){return i(a.second)}).y(function(a){return j(a.metric1)}).interpolate("basis")}function g(){f(),t.append("svg:g").attr("class","x axis").attr("transform","translate(0,180)").call(k),t.append("svg:g").attr("class","y axis").attr("transform","translate(20,0)").call(l),t.append("svg:path").attr({d:m(o),stroke:"blue","stroke-width":2,fill:"none","class":q})}function h(){f(),t.selectAll("g.y.axis").call(l),t.selectAll("g.x.axis").call(k),t.selectAll("."+q).attr({d:m(o)})}var i,j,k,l,m,n=a(e.chartData),o=n(c),p=10,q="path",r=b.d3,s=d.find("svg"),t=r.select(s[0]),u=o[0].second;c.$watchCollection(n,function(a,b){o=a,h()}),g()}}}]).directive("streamChart",["$parse","$window",function(a,b){return{restrict:"EA",link:function(b,c,d){function e(){var a=vis.moment(),b=k.getWindow(),c=b.end-b.start;k.setWindow(a-c,a,{animate:!1}),setTimeout(e,f)}var f=2e3,g=a(d.chartData),h=g(b),i=document.getElementById("visualization"),j=(new vis.DataSet,{start:vis.moment().add(-30,"seconds"),end:vis.moment(),dataAxis:{customRange:{left:{min:0}}},drawPoints:{style:"circle"},shaded:{orientation:"bottom"}}),k=new vis.Graph2d(i,h,j);setTimeout(e,f)}}}]).directive("barsChart",["$parse","$window",function(a,b){return{restrict:"EA",link:function(b,c,d){var e=a(d.chartData),f=e(b),g=document.getElementById("visualization"),h=new vis.DataSet;h.add({id:0,content:"Received"}),h.add({id:1,content:"Mapped"}),h.add({id:2,content:"Rejected"});var i={legend:{left:{position:"top-left"}},style:"bar",barChart:{width:50,align:"center",handleOverlap:"sideBySide"},drawPoints:!0,dataAxis:{title:{left:{text:"Number of requests (#)"}},customRange:{left:{min:-5,max:30},right:{min:-5}}},orientation:"top",start:"2015-02-05",end:"2015-02-20"};new vis.Graph2d(g,f,h,i)}}}]).directive("scatterChart",["$parse","$window",function(a,b){return{restrict:"EA",transclude:!1,scope:{data:"=",options:"=",events:"="},link:function(a,b,c){var d=null;a.$watch("data",function(){console.log(a.data),null!=a.data&&(null!=d&&d.destroy(),d=new vis.Graph2d(b[0],a.data.items,a.data.groups,a.options),null!=a.events&&null!=a.events.onload&&angular.isFunction(a.events.onload)&&a.events.onload(d))}),a.$watchCollection("options",function(a){null!=d&&d.setOptions(a)})}}}]).directive("donutchart",function(){function a(a,b){b.element=a;var c=new Morris.Donut(b).select(0);return c}return{restrict:"E",scope:{options:"="},replace:!0,template:'<div style="height: 230px;"></div>',link:function(b,c,d){return a(d.id,b.options)}}}),angular.module("tNovaApp").directive("topologySimple",["$parse","$window",function(a,b){d3.scale.category20();return{restrict:"E",link:function(a,b,c,d){a.$on("topologyData",function(c,d){if(d){var e=d.nodes,f=d.links,g=b[0],h={nodes:e,edges:f},i="#0066FF",j="#33CC33",k="#2B1B17",l={width:"100%",height:"500px",nodes:{widthMin:20,widthMax:200,fontColor:k},edges:{length:80,color:{color:"#070707",highlight:i,hover:j}},physics:{barnesHut:{gravitationalConstant:-7025}},hover:!0,groups:{pop:{shape:"image",image:"img/infr_repo/pop.png"}},click:"my_tree_handler()",keyboard:!0,tooltip:{delay:300,fontColor:"black",fontSize:14,fontFace:"verdana",color:{border:"#666",background:"#FFFFC6"}}},m=new vis.Network(g,h,l);return m.on("click",function(b){var c;d.nodes.forEach(function(a){console.log(a),console.log(a.id),console.log(b.nodes),console.log(a.id===b.nodes[0]),a.id===b.nodes[0]&&(c=a.group)}),console.log("Clicked node "+b.nodes+" "+c),console.log(a),a.ui_handler(b.nodes[0],c)}),m}})}}}]).directive("topologyComplete",["$parse","$window",function(a,b){d3.scale.category20();return{restrict:"E",link:function(a,b,c,d){a.$on("completeTopologyData",function(a,c){if(console.log("completeTopologyData data is updated."),c){var d=c.nodes,e=c.links,f=b[0],g={nodes:d,edges:e},h={width:"100%",height:"500px",physics:{hierarchicalRepulsion:{centralGravity:.1,springLength:50,springConstant:.05,nodeDistance:60,damping:.09}},nodes:{shape:"dot",radiusMin:10,radiusMax:30,fontSize:12,fontFace:"Tahoma",scaleFontWithValue:!0,fontSizeMin:8,fontSizeMax:20,fontThreshold:12,fontSizeMaxVisible:20},edges:{width:.15,inheritColor:"from"},tooltip:{delay:200,fontSize:12,color:{background:"#fff"}},smoothCurves:{dynamic:!1,type:"continuous"},stabilize:!1,hideEdgesOnDrag:!0},i=new vis.Network(f,g,h);return i.on("click",onClick),i}})}}}]),angular.module("tNovaApp").directive("layers",["$parse","$window","localStorageService","$timeout",function(a,b,c,d){return{templateUrl:"partials/t-nova/popLayers.html",scope:{yourDirective:"="},link:function(a,b,c,e){d(function(){console.log(a.yourDirective)}),a.$on("rootElements",function(b,c){c&&(a.rootElement=c)})}}}]),angular.module("tNovaApp").directive("timeLine",function(){return{restrict:"EA",transclude:!1,scope:{data:"=",options:"=",events:"="},link:function(a,b,c){var d=null;a.$watch("data",function(){console.log("Data changed"),null!=a.data&&(null!=d&&d.destroy(),d=new vis.Timeline(b[0],a.data.items,a.options),angular.forEach(a.events,function(a,b){graphEvents.indexOf(String(b))>=0&&d.on(b,a)}),null!=a.events&&null!=a.events.onload&&angular.isFunction(a.events.onload)&&a.events.onload(d))}),a.$watchCollection("options",function(a){null!=d&&d.setOptions(a)})}}}),angular.module("tNovaApp").directive("modalscroll",["$window",function(a){return{priority:0,link:function(b,c){b.$watch(function(){return $(c).height()},function(b,d){var e=angular.element(a),f=c[0].scrollHeight;f+180>e.height()?(console.log("Set bigger"),c.css("height",e.height()-200)):(console.log("Set samll"),c.css("height",f))})}}}]),angular.module("tNovaApp").filter("prettify",function(){function a(a){return a=a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),a.replace(/("(\\u[a-zA-Z0-9]{4}|\\[^u]|[^\\"])*"(\s*:)?|\b(true|false|null)\b|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?)/g,function(a){var b="number";return/^"/.test(a)?b=/:$/.test(a)?"key":"string":/true|false/.test(a)?b="boolean":/null/.test(a)&&(b="null"),'<span class="'+b+'">'+a+"</span>"})}return a}).filter("prettyJSON",function(){function a(a){return JSON?JSON.stringify(a,null,"  "):"your browser doesnt support JSON so cant pretty print"}return a});