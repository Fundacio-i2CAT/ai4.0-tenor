<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Class: NS_helper
  
    &mdash; Documentation by YARD 0.9.5
  
</title>

  <link rel="stylesheet" href="css/style.css" type="text/css" charset="utf-8" />

  <link rel="stylesheet" href="css/common.css" type="text/css" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  pathId = "NS_helper";
  relpath = '';
</script>


  <script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="class_list.html"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="_index.html">Index (N)</a> &raquo;
    
    
    <span class="title">NS_helper</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <iframe id="search_frame" src="class_list.html"></iframe>

      <div id="content"><h1>Class: NS_helper
  
  
  
</h1>
<div class="box_info">
  
  <dl>
    <dt>Inherits:</dt>
    <dd>
      <span class="inheritName">Object</span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next">NS_helper</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
    </dd>
  </dl>
  

  
  
  
  
  

  

  
  <dl>
    <dt>Defined in:</dt>
    <dd>service-mapper/helpers/sm-unimi_NS_helper.rb</dd>
  </dl>
  
</div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    
<p>require_relative &#39;sm-unimi_dummyRest&#39;</p>


  </div>
</div>
<div class="tags">
  

</div>






  
    <h2>
      Instance Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#is_number%3F-instance_method" title="#is_number? (instance method)">#<strong>is_number?</strong>(string)  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>checks if an object is a number.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#queryServiceCatalogs-instance_method" title="#queryServiceCatalogs (instance method)">#<strong>queryServiceCatalogs</strong>(ns_address, requestbody_hash, ns_id, ns_sla, simulation, debugprint)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
    </ul>
  



  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="is_number?-instance_method">
  
    #<strong>is_number?</strong>(string)  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>checks if an object is a number</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


306
307
308</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'service-mapper/helpers/sm-unimi_NS_helper.rb', line 306</span>

<span class='kw'>def</span> <span class='id identifier rubyid_is_number?'>is_number?</span> <span class='id identifier rubyid_string'>string</span>
	<span class='kw'>true</span> <span class='kw'>if</span> <span class='const'>Float</span><span class='lparen'>(</span><span class='id identifier rubyid_string'>string</span><span class='rparen'>)</span> <span class='kw'>rescue</span> <span class='kw'>false</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="queryServiceCatalogs-instance_method">
  
    #<strong>queryServiceCatalogs</strong>(ns_address, requestbody_hash, ns_id, ns_sla, simulation, debugprint)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242
243
244
245
246
247
248
249
250
251
252
253
254
255
256
257
258
259
260
261
262
263
264
265
266
267
268
269
270
271
272
273
274
275
276
277
278
279
280
281
282
283
284
285
286
287
288
289
290
291
292
293
294
295
296
297
298
299
300
301
302</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'service-mapper/helpers/sm-unimi_NS_helper.rb', line 32</span>

<span class='kw'>def</span> <span class='id identifier rubyid_queryServiceCatalogs'>queryServiceCatalogs</span><span class='lparen'>(</span><span class='id identifier rubyid_ns_address'>ns_address</span><span class='comma'>,</span> <span class='id identifier rubyid_requestbody_hash'>requestbody_hash</span><span class='comma'>,</span> <span class='id identifier rubyid_ns_id'>ns_id</span><span class='comma'>,</span> <span class='id identifier rubyid_ns_sla'>ns_sla</span><span class='comma'>,</span> <span class='id identifier rubyid_simulation'>simulation</span><span class='comma'>,</span> <span class='id identifier rubyid_debugprint'>debugprint</span><span class='rparen'>)</span>

	<span class='id identifier rubyid_conv'>conv</span> <span class='op'>=</span> <span class='const'>Sm_converters</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
	<span class='comment'>#dummyRest = Sm_dummyRest.new
</span>
	<span class='kw'>if</span> <span class='id identifier rubyid_simulation'>simulation</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>true</span><span class='tstring_end'>&quot;</span></span>
		<span class='id identifier rubyid_ns_base_address'>ns_base_address</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>_</span><span class='tstring_end'>&quot;</span></span>
	<span class='kw'>else</span>
		<span class='id identifier rubyid_ns_base_address'>ns_base_address</span> <span class='op'>=</span> <span class='id identifier rubyid_ns_address'>ns_address</span>
	<span class='kw'>end</span>

	<span class='comment'># Query NS catalogue
</span>	<span class='kw'>begin</span>
		<span class='id identifier rubyid_nsd_from_catalogue'>nsd_from_catalogue</span> <span class='op'>=</span> <span class='const'>RestClient</span><span class='period'>.</span><span class='id identifier rubyid_get'>get</span><span class='lparen'>(</span><span class='id identifier rubyid_ns_base_address'>ns_base_address</span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/network-services/</span><span class='tstring_end'>&#39;</span></span> <span class='op'>+</span> <span class='id identifier rubyid_ns_id'>ns_id</span><span class='comma'>,</span> <span class='symbol'>:accept</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>application/json</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
	<span class='kw'>rescue</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_e'>e</span>
		<span class='kw'>if</span> <span class='id identifier rubyid_debugprint'>debugprint</span> <span class='op'>==</span> <span class='kw'>true</span>
			<span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\nmapper: API call fail /network-services\n</span><span class='tstring_end'>&quot;</span></span>
			<span class='id identifier rubyid_puts'>puts</span> <span class='id identifier rubyid_e'>e</span>
		<span class='kw'>end</span>
		<span class='comment'>#nsd_from_catalogue = dummyRest.dummy_NScatalogue(ns_id, debugprint)
</span>		<span class='kw'>return</span> <span class='lbrace'>{</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>status</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='op'>-</span><span class='int'>32</span><span class='comma'>,</span>
				<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>error</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>API call fail: /network-services</span><span class='tstring_end'>&quot;</span></span><span class='rbrace'>}</span>
	<span class='kw'>end</span>

	<span class='comment'># Check if the requested ns_id has its match in the nsd catalogue
</span>	<span class='id identifier rubyid_nsd_from_catalogue_hash'>nsd_from_catalogue_hash</span> <span class='op'>=</span> <span class='const'>JSON</span><span class='period'>.</span><span class='id identifier rubyid_parse'>parse</span><span class='lparen'>(</span><span class='id identifier rubyid_nsd_from_catalogue'>nsd_from_catalogue</span><span class='rparen'>)</span>
	<span class='kw'>if</span> <span class='id identifier rubyid_nsd_from_catalogue_hash'>nsd_from_catalogue_hash</span><span class='period'>.</span><span class='id identifier rubyid_has_key?'>has_key?</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>error</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
		<span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\nmapper: No matching NSd in NS catalog\n</span><span class='tstring_end'>&quot;</span></span>
		<span class='kw'>return</span> <span class='lbrace'>{</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>status</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='op'>-</span><span class='int'>1</span><span class='comma'>,</span>
				<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>error</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>No matching NSd in NS catalog</span><span class='tstring_end'>&quot;</span></span><span class='rbrace'>}</span>
	<span class='kw'>end</span>


	<span class='comment'># Select the requested flavour and extract its associated relevant VNFd data from the NSd
</span>	<span class='id identifier rubyid_constituent_vnf_array'>constituent_vnf_array</span> <span class='op'>=</span> <span class='const'>Array</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
	<span class='id identifier rubyid_nsd_from_catalogue_hash'>nsd_from_catalogue_hash</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>sla</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_sla'>sla</span><span class='op'>|</span>
		<span class='kw'>if</span> <span class='id identifier rubyid_sla'>sla</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>id</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_downcase'>downcase</span> <span class='op'>==</span> <span class='id identifier rubyid_ns_sla'>ns_sla</span>
			<span class='id identifier rubyid_sla'>sla</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>constituent_vnf</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_const_vnf'>const_vnf</span><span class='op'>|</span>
				<span class='id identifier rubyid_vnf_id_hash'>vnf_id_hash</span> <span class='op'>=</span> <span class='const'>Hash</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
				<span class='id identifier rubyid_vnf_id_hash'>vnf_id_hash</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>vnf_id</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/</span><span class='tstring_end'>&quot;</span></span> <span class='op'>+</span> <span class='id identifier rubyid_const_vnf'>const_vnf</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>vnf_reference</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span>
				<span class='comment'>#vnf_id_hash[&quot;vnf_id&quot;] = &quot;/7&quot;   ### TEMPORARY STUFF
</span>				<span class='comment'>#vnf_id_hash[&quot;vnf_id&quot;] = &quot;/619&quot;	### TEMPORARY CRAP
</span>				<span class='id identifier rubyid_vnf_id_hash'>vnf_id_hash</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>vnf_flavour</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_const_vnf'>const_vnf</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>vnf_flavour_id_reference</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span>
				<span class='id identifier rubyid_vnf_id_hash'>vnf_id_hash</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>vnf_instances</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_const_vnf'>const_vnf</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>number_of_instances</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span>
				<span class='id identifier rubyid_constituent_vnf_array'>constituent_vnf_array</span><span class='period'>.</span><span class='id identifier rubyid_push'>push</span><span class='lparen'>(</span><span class='id identifier rubyid_vnf_id_hash'>vnf_id_hash</span><span class='rparen'>)</span>
			<span class='kw'>end</span>
		<span class='kw'>end</span>
	<span class='kw'>end</span>
	<span class='kw'>if</span> <span class='id identifier rubyid_constituent_vnf_array'>constituent_vnf_array</span> <span class='op'>==</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
		<span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\nmapper: no matching SLA in NSd\n</span><span class='tstring_end'>&quot;</span></span>
		<span class='kw'>return</span> <span class='lbrace'>{</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>status</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='op'>-</span><span class='int'>2</span><span class='comma'>,</span>
				<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>error</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>No matching SLA in NSd</span><span class='tstring_end'>&quot;</span></span><span class='rbrace'>}</span>
	<span class='kw'>end</span>


	<span class='comment'># Query the Virtual Network Function catalogue
</span>	<span class='comment'># We collected the NSd, now we check and collect the VNFd(s) the Network Service is composed by.
</span>	<span class='id identifier rubyid_vnf_id_array'>vnf_id_array</span> <span class='op'>=</span> <span class='const'>Array</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
	<span class='id identifier rubyid_vnf_requirements'>vnf_requirements</span> <span class='op'>=</span> <span class='const'>Array</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
	<span class='id identifier rubyid_vnfd_temp_hash'>vnfd_temp_hash</span> <span class='op'>=</span> <span class='const'>Hash</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
	<span class='id identifier rubyid_constituent_vnf_array'>constituent_vnf_array</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_constituent_vnf'>constituent_vnf</span><span class='op'>|</span>
		<span class='id identifier rubyid_vnf_id'>vnf_id</span> <span class='op'>=</span> <span class='id identifier rubyid_constituent_vnf'>constituent_vnf</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>vnf_id</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span>
		<span class='id identifier rubyid_vnf_id_array'>vnf_id_array</span><span class='period'>.</span><span class='id identifier rubyid_push'>push</span><span class='lparen'>(</span><span class='id identifier rubyid_vnf_id'>vnf_id</span><span class='rparen'>)</span>
		<span class='id identifier rubyid_vnf_flavour'>vnf_flavour</span> <span class='op'>=</span> <span class='id identifier rubyid_constituent_vnf'>constituent_vnf</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>vnf_flavour</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span>
		<span class='kw'>begin</span>
			<span class='id identifier rubyid_vnfd'>vnfd</span> <span class='op'>=</span> <span class='const'>RestClient</span><span class='period'>.</span><span class='id identifier rubyid_get'>get</span><span class='lparen'>(</span><span class='id identifier rubyid_ns_base_address'>ns_base_address</span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/vnfs/</span><span class='tstring_end'>&#39;</span></span> <span class='op'>+</span> <span class='id identifier rubyid_vnf_id'>vnf_id</span><span class='comma'>,</span> <span class='symbol'>:accept</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>application/json</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
		<span class='kw'>rescue</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_e'>e</span>
			<span class='kw'>if</span> <span class='id identifier rubyid_debugprint'>debugprint</span> <span class='op'>==</span> <span class='kw'>true</span>
				<span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>mapper: API call fail /vnfs\n</span><span class='tstring_end'>&quot;</span></span>
				<span class='id identifier rubyid_puts'>puts</span> <span class='id identifier rubyid_e'>e</span>
			<span class='kw'>end</span>
			<span class='comment'>#vnfd = dummyRest.dummy_VNFcatalogue(vnf_id, debugprint)
</span>			<span class='kw'>return</span> <span class='lbrace'>{</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>status</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='op'>-</span><span class='int'>33</span><span class='comma'>,</span>
					<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>error</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>API call fail: /vnfs</span><span class='tstring_end'>&quot;</span></span><span class='rbrace'>}</span>
		<span class='kw'>end</span>
		<span class='kw'>if</span> <span class='id identifier rubyid_vnfd'>vnfd</span> <span class='op'>==</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
			<span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>mapper: no matching VNFd in VNF catalog\n</span><span class='tstring_end'>&quot;</span></span>
			<span class='kw'>return</span> <span class='lbrace'>{</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>status</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='op'>-</span><span class='int'>3</span><span class='comma'>,</span>
					<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>error</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>No matching VNFd in VNF catalog</span><span class='tstring_end'>&quot;</span></span><span class='rbrace'>}</span>
		<span class='kw'>end</span>

		<span class='id identifier rubyid_vnfd_temp_hash'>vnfd_temp_hash</span> <span class='op'>=</span> <span class='const'>JSON</span><span class='period'>.</span><span class='id identifier rubyid_parse'>parse</span><span class='lparen'>(</span> <span class='id identifier rubyid_vnfd'>vnfd</span> <span class='rparen'>)</span>

		<span class='comment'># Now we scan the vnfd.deployment_flavour in the retrieved VNFd, looking for the matching requested flavour.
</span>		<span class='comment'># Init these vars with dummy values
</span>		<span class='id identifier rubyid_vdu_arr'>vdu_arr</span> <span class='op'>=</span> <span class='const'>Array</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
		<span class='comment'>#number_of_vdu_inst = &quot;_&quot;
</span>
		<span class='id identifier rubyid_vnfd_temp_hash'>vnfd_temp_hash</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>vnfd</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>deployment_flavours</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_depl_flavour'>depl_flavour</span><span class='op'>|</span>
			<span class='comment'>#if vnf_flavour == depl_flavour[&quot;id&quot;] ## In NSD it is referenced by id, while in vnf, id is ignored and it is referenced by flavour_key. This is messy.
</span>			<span class='kw'>if</span> <span class='id identifier rubyid_vnf_flavour'>vnf_flavour</span> <span class='op'>==</span> <span class='id identifier rubyid_depl_flavour'>depl_flavour</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>flavour_key</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span>
				<span class='id identifier rubyid_vdu_arr'>vdu_arr</span> <span class='op'>=</span> <span class='id identifier rubyid_depl_flavour'>depl_flavour</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>vdu_reference</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span>
				<span class='comment'>#number_of_vdu_inst = depl_flavour[&quot;number_of_instances&quot;]
</span>			<span class='kw'>end</span>
		<span class='kw'>end</span>

		<span class='kw'>if</span> <span class='lparen'>(</span><span class='id identifier rubyid_vdu_arr'>vdu_arr</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span><span class='rparen'>)</span> <span class='comment'>#|| (number_of_vdu_inst == &quot;_&quot;)
</span>			<span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\nmapper: no matching flavour in vnf.deployment_flavour\n</span><span class='tstring_end'>&quot;</span></span>
			<span class='kw'>return</span> <span class='lbrace'>{</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>status</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='op'>-</span><span class='int'>4</span><span class='comma'>,</span>
					<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>error</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>No matching flavour in vnf.deployment_flavour</span><span class='tstring_end'>&quot;</span></span><span class='rbrace'>}</span>
		<span class='kw'>end</span>

		<span class='comment'># Why whole lotta bandwidths?
</span>		<span class='comment'># tot_peak_bw is the aggregate of the &quot;networking_resources&quot;-&gt;&quot;peak&quot; values;
</span>		<span class='comment'># tot_aver_bw is the aggregate of the &quot;networking_resources&quot;-&gt;&quot;average&quot; values;
</span>		<span class='comment'># max_bw is the physical network interface card bandwidth specification (ex: 100Mbps)
</span>		<span class='id identifier rubyid_tot_vcpu'>tot_vcpu</span> <span class='op'>=</span> <span class='int'>0</span>			<span class='comment'># no unit of measurement
</span>		<span class='id identifier rubyid_tot_ram'>tot_ram</span> <span class='op'>=</span> <span class='float'>0.0</span>			<span class='comment'># converted and expressed in MBytes
</span>		<span class='id identifier rubyid_tot_hdd'>tot_hdd</span> <span class='op'>=</span> <span class='float'>0.0</span>			<span class='comment'># converter and expressed in GBytes
</span>		<span class='id identifier rubyid_tot_peak_bw'>tot_peak_bw</span> <span class='op'>=</span> <span class='int'>0</span>			<span class='comment'># converted and expressed in Mbps
</span>		<span class='id identifier rubyid_tot_aver_bw'>tot_aver_bw</span> <span class='op'>=</span> <span class='int'>0</span>			<span class='comment'># converted and expressed in Mbps
</span>		<span class='id identifier rubyid_max_bw'>max_bw</span> <span class='op'>=</span> <span class='float'>0.0</span>
		<span class='id identifier rubyid_curr_bw'>curr_bw</span> <span class='op'>=</span> <span class='float'>0.0</span>			<span class='comment'># converted and expressed in Mbps
</span>		<span class='comment'># ---
</span>		<span class='id identifier rubyid_tot_cpu_aesni'>tot_cpu_aesni</span> <span class='op'>=</span> <span class='int'>0</span>
		<span class='id identifier rubyid_tot_dpdk'>tot_dpdk</span> <span class='op'>=</span> <span class='int'>0</span>

		<span class='comment'># We are collecting the aggregate of the requirements, even though it seems that in T-Nova
</span>		<span class='comment'># each VNF is composed by a single vdu...
</span>		<span class='id identifier rubyid_vnf_req'>vnf_req</span> <span class='op'>=</span> <span class='const'>Hash</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
		<span class='id identifier rubyid_vnfd_temp_hash'>vnfd_temp_hash</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>vnfd</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>vdu</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_vdu'>vdu</span><span class='op'>|</span>
			<span class='id identifier rubyid_vdu_arr'>vdu_arr</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_vdu_name'>vdu_name</span><span class='op'>|</span>
				<span class='kw'>if</span> <span class='id identifier rubyid_vdu'>vdu</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>id</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='id identifier rubyid_vdu_name'>vdu_name</span>
					<span class='id identifier rubyid_tot_vcpu'>tot_vcpu</span>    <span class='op'>+=</span> <span class='id identifier rubyid_vdu'>vdu</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>resource_requirements</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>vcpus</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span>
					<span class='comment'>#tot_ram     += conv.ram_conversion(vdu[&quot;resource_requirements&quot;][&quot;memory&quot;], vdu[&quot;resource_requirements&quot;][&quot;memory_unit&quot;]) ### memory unit removed, apparently
</span>					<span class='id identifier rubyid_tot_ram'>tot_ram</span>     <span class='op'>+=</span> <span class='id identifier rubyid_conv'>conv</span><span class='period'>.</span><span class='id identifier rubyid_ram_conversion'>ram_conversion</span><span class='lparen'>(</span><span class='id identifier rubyid_vdu'>vdu</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>resource_requirements</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>memory</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='id identifier rubyid_vdu'>vdu</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>resource_requirements</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>memory_unit</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='rparen'>)</span>  <span class='comment'>### not anymore, apparently
</span>					<span class='id identifier rubyid_tot_hdd'>tot_hdd</span>     <span class='op'>+=</span> <span class='id identifier rubyid_conv'>conv</span><span class='period'>.</span><span class='id identifier rubyid_hdd_conversion'>hdd_conversion</span><span class='lparen'>(</span><span class='id identifier rubyid_vdu'>vdu</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>resource_requirements</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>storage</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>size</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='id identifier rubyid_vdu'>vdu</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>resource_requirements</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>storage</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>size_unit</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='rparen'>)</span>
					<span class='comment'>### networking resources still missing in the Marketplace generated VNFD
</span>					<span class='kw'>if</span> <span class='id identifier rubyid_vdu'>vdu</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>networking_resources</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span>
						<span class='id identifier rubyid_tot_peak_bw'>tot_peak_bw</span> <span class='op'>+=</span> <span class='int'>0</span>
						<span class='id identifier rubyid_tot_aver_bw'>tot_aver_bw</span> <span class='op'>+=</span> <span class='int'>0</span>
					<span class='kw'>else</span>
						<span class='id identifier rubyid_tot_peak_bw'>tot_peak_bw</span> <span class='op'>+=</span> <span class='id identifier rubyid_conv'>conv</span><span class='period'>.</span><span class='id identifier rubyid_bw_conversion'>bw_conversion</span><span class='lparen'>(</span><span class='id identifier rubyid_vdu'>vdu</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>networking_resources</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>peak</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='rparen'>)</span>
						<span class='id identifier rubyid_tot_aver_bw'>tot_aver_bw</span> <span class='op'>+=</span> <span class='id identifier rubyid_conv'>conv</span><span class='period'>.</span><span class='id identifier rubyid_bw_conversion'>bw_conversion</span><span class='lparen'>(</span><span class='id identifier rubyid_vdu'>vdu</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>networking_resources</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>average</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='rparen'>)</span>
					<span class='kw'>end</span>
					<span class='kw'>if</span> <span class='id identifier rubyid_vdu'>vdu</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>resource_requirements</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>network_interface_bandwidth</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span>
						<span class='id identifier rubyid_curr_bw'>curr_bw</span>	<span class='op'>=</span> <span class='int'>0</span>
					<span class='kw'>else</span>
						<span class='id identifier rubyid_curr_bw'>curr_bw</span> <span class='op'>=</span> <span class='id identifier rubyid_conv'>conv</span><span class='period'>.</span><span class='id identifier rubyid_bw_conversion'>bw_conversion</span><span class='lparen'>(</span><span class='id identifier rubyid_vdu'>vdu</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>resource_requirements</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>network_interface_bandwidth</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='rparen'>)</span>
					<span class='kw'>end</span>
					<span class='kw'>if</span> <span class='id identifier rubyid_curr_bw'>curr_bw</span> <span class='op'>&gt;</span> <span class='id identifier rubyid_max_bw'>max_bw</span>
						<span class='id identifier rubyid_max_bw'>max_bw</span> <span class='op'>=</span> <span class='id identifier rubyid_curr_bw'>curr_bw</span>
					<span class='kw'>end</span>
					<span class='kw'>if</span> <span class='id identifier rubyid_vdu'>vdu</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>resource_requirements</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>cpu_support_accelerator</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_downcase'>downcase</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>aes-ni</span><span class='tstring_end'>&quot;</span></span>
						<span class='id identifier rubyid_tot_cpu_aesni'>tot_cpu_aesni</span> <span class='op'>+=</span> <span class='int'>1</span>
					<span class='kw'>end</span>
					<span class='kw'>if</span> <span class='id identifier rubyid_vdu'>vdu</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>resource_requirements</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>data_processing_acceleration_library</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_downcase'>downcase</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>dpdk</span><span class='tstring_end'>&quot;</span></span>
						<span class='id identifier rubyid_tot_dpdk'>tot_dpdk</span> <span class='op'>+=</span> <span class='int'>1</span>
					<span class='kw'>end</span>
				<span class='kw'>end</span>
			<span class='kw'>end</span>
		<span class='kw'>end</span>

		<span class='id identifier rubyid_vnf_req'>vnf_req</span> <span class='op'>=</span> <span class='const'>Hash</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
		<span class='id identifier rubyid_vnf_req'>vnf_req</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>vnf_id</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span>    <span class='op'>=</span> <span class='id identifier rubyid_vnf_id'>vnf_id</span>
		<span class='id identifier rubyid_vnf_req'>vnf_req</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>vnf_flavour</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_vnf_flavour'>vnf_flavour</span>
		<span class='id identifier rubyid_vnf_req'>vnf_req</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>vnf_num_of_inst</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_constituent_vnf'>constituent_vnf</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>vnf_instances</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span>
		<span class='id identifier rubyid_vnf_req'>vnf_req</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>req_vcpus</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_tot_vcpu'>tot_vcpu</span> <span class='comment'>#* number_of_vdu_inst.to_i
</span>		<span class='id identifier rubyid_vnf_req'>vnf_req</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>req_ram</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span>   <span class='op'>=</span> <span class='id identifier rubyid_tot_ram'>tot_ram</span> <span class='comment'>#* number_of_vdu_inst.to_i
</span>		<span class='id identifier rubyid_vnf_req'>vnf_req</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>req_hdd</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span>   <span class='op'>=</span> <span class='id identifier rubyid_tot_hdd'>tot_hdd</span> <span class='comment'>#* number_of_vdu_inst.to_i
</span>		<span class='id identifier rubyid_vnf_req'>vnf_req</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>req_nic_bw</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span>  <span class='op'>=</span> <span class='id identifier rubyid_max_bw'>max_bw</span>
		<span class='id identifier rubyid_vnf_req'>vnf_req</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>req_peak_bw</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_tot_peak_bw'>tot_peak_bw</span> <span class='comment'>#* number_of_vdu_inst.to_i
</span>		<span class='id identifier rubyid_vnf_req'>vnf_req</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>req_aver_bw</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_tot_aver_bw'>tot_aver_bw</span> <span class='comment'>#* number_of_vdu_inst.to_i
</span>		<span class='id identifier rubyid_vnf_req'>vnf_req</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>req_cpu_accel_aes-ni</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_tot_cpu_aesni'>tot_cpu_aesni</span> <span class='comment'>#* number_of_vdu_inst.to_i
</span>		<span class='id identifier rubyid_vnf_req'>vnf_req</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>req_data_accel_lib_dpdk</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_tot_dpdk'>tot_dpdk</span> <span class='comment'>#* number_of_vdu_inst.to_i
</span>
		<span class='id identifier rubyid_vnf_requirements'>vnf_requirements</span><span class='period'>.</span><span class='id identifier rubyid_push'>push</span><span class='lparen'>(</span><span class='id identifier rubyid_vnf_req'>vnf_req</span><span class='rparen'>)</span>
	<span class='kw'>end</span>

	<span class='comment'># Collecting data regarding interconnection graph between VNFs and between VNFs and outside world
</span>	<span class='comment'># As now, only point to point (E-line) links are supported (and, hopefully, it will always be)
</span>	<span class='id identifier rubyid_virtual_links_array'>virtual_links_array</span> <span class='op'>=</span> <span class='const'>Array</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
	<span class='id identifier rubyid_nsd_from_catalogue_hash'>nsd_from_catalogue_hash</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>vld</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>virtual_links</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_virtual_link'>virtual_link</span><span class='op'>|</span>
		<span class='comment'># Filter out non-data links and mismatching flavours
</span>		<span class='kw'>if</span> <span class='lparen'>(</span><span class='lparen'>(</span><span class='id identifier rubyid_virtual_link'>virtual_link</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>alias</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_downcase'>downcase</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>data</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='op'>|</span> <span class='lparen'>(</span><span class='id identifier rubyid_virtual_link'>virtual_link</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>alias</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_downcase'>downcase</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>ingress</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='op'>|</span> <span class='lparen'>(</span><span class='id identifier rubyid_virtual_link'>virtual_link</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>alias</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_downcase'>downcase</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>egress</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='op'>|</span> <span class='lparen'>(</span><span class='id identifier rubyid_virtual_link'>virtual_link</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>alias</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_downcase'>downcase</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>engress</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='rparen'>)</span> <span class='op'>&amp;</span> <span class='lparen'>(</span><span class='id identifier rubyid_virtual_link'>virtual_link</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>sla_ref_id</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='id identifier rubyid_ns_sla'>ns_sla</span><span class='rparen'>)</span>
			<span class='id identifier rubyid_virt_link_item'>virt_link_item</span> <span class='op'>=</span> <span class='const'>Hash</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
			<span class='id identifier rubyid_virt_link_item'>virt_link_item</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>virtual_link_id</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_virtual_link'>virtual_link</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>vld_id</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span>
			<span class='id identifier rubyid_virt_link_item'>virt_link_item</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>root_requirements</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_conv'>conv</span><span class='period'>.</span><span class='id identifier rubyid_bw_conversion'>bw_conversion</span><span class='lparen'>(</span><span class='id identifier rubyid_virtual_link'>virtual_link</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>root_requirements</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='rparen'>)</span>
			<span class='comment'># Temporary bugfix since links may have unlimited bw requirements
</span>			<span class='kw'>if</span> <span class='id identifier rubyid_virt_link_item'>virt_link_item</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>root_requirements</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='int'>0</span>
				<span class='id identifier rubyid_virt_link_item'>virt_link_item</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>root_requirements</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='float'>0.001</span>
			<span class='kw'>end</span>

			<span class='comment'># This junk has been made in order to adapat the marketplace generated VLD
</span>			<span class='comment'># &quot;data&quot; VLD has been guessed, since I&#39;ve never seen an example of this kind of link
</span>			<span class='comment'># 14/Mar/16: it&#39;s clear the aliases are arbitrary
</span>			<span class='kw'>if</span> <span class='id identifier rubyid_virtual_link'>virtual_link</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>alias</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>ingress</span><span class='tstring_end'>&quot;</span></span>
				<span class='id identifier rubyid_virt_link_item'>virt_link_item</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>source</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>ns_ext_ingress</span><span class='tstring_end'>&quot;</span></span>
				<span class='id identifier rubyid_virt_link_item'>virt_link_item</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>destination</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_virtual_link'>virtual_link</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>connections</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span>
				<span class='id identifier rubyid_virt_link_item'>virt_link_item</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>destination</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_slice!'>slice!</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>VNF#</span><span class='tstring_end'>&quot;</span></span>
				<span class='id identifier rubyid_virtual_links_array'>virtual_links_array</span><span class='period'>.</span><span class='id identifier rubyid_push'>push</span><span class='lparen'>(</span><span class='id identifier rubyid_virt_link_item'>virt_link_item</span><span class='rparen'>)</span>
			<span class='kw'>end</span>
			<span class='kw'>if</span> <span class='id identifier rubyid_virtual_link'>virtual_link</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>alias</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>egress</span><span class='tstring_end'>&quot;</span></span>
				<span class='id identifier rubyid_virt_link_item'>virt_link_item</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>source</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_virtual_link'>virtual_link</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>connections</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span>
				<span class='id identifier rubyid_virt_link_item'>virt_link_item</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>source</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_slice!'>slice!</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>VNF#</span><span class='tstring_end'>&quot;</span></span>
				<span class='id identifier rubyid_virt_link_item'>virt_link_item</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>destination</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>ns_ext_egress</span><span class='tstring_end'>&quot;</span></span>
				<span class='id identifier rubyid_virtual_links_array'>virtual_links_array</span><span class='period'>.</span><span class='id identifier rubyid_push'>push</span><span class='lparen'>(</span><span class='id identifier rubyid_virt_link_item'>virt_link_item</span><span class='rparen'>)</span>
			<span class='kw'>end</span>
			<span class='kw'>if</span> <span class='id identifier rubyid_virtual_link'>virtual_link</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>alias</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>engress</span><span class='tstring_end'>&quot;</span></span>  <span class='comment'>### &quot;Please, let me win the spelling bee...&quot;
</span>				<span class='id identifier rubyid_virt_link_item'>virt_link_item</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>source</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_virtual_link'>virtual_link</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>connections</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span>
				<span class='id identifier rubyid_virt_link_item'>virt_link_item</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>source</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_slice!'>slice!</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>VNF#</span><span class='tstring_end'>&quot;</span></span>
				<span class='id identifier rubyid_virt_link_item'>virt_link_item</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>destination</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>ns_ext_engress</span><span class='tstring_end'>&quot;</span></span>
				<span class='id identifier rubyid_virtual_links_array'>virtual_links_array</span><span class='period'>.</span><span class='id identifier rubyid_push'>push</span><span class='lparen'>(</span><span class='id identifier rubyid_virt_link_item'>virt_link_item</span><span class='rparen'>)</span>
			<span class='kw'>end</span>
			<span class='kw'>if</span> <span class='id identifier rubyid_virtual_link'>virtual_link</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>alias</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>data</span><span class='tstring_end'>&quot;</span></span>
				<span class='comment'>### 14/Mar/16: more junk, since now links might be E-LAN type, in opposition with the model and what has been discussed so far
</span>				<span class='kw'>if</span> <span class='id identifier rubyid_virtual_link'>virtual_link</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>connections</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span> <span class='op'>==</span> <span class='int'>1</span>
					<span class='id identifier rubyid_virt_link_item'>virt_link_item</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>source</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_virtual_link'>virtual_link</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>connections</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span>
					<span class='id identifier rubyid_virt_link_item'>virt_link_item</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>source</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_slice!'>slice!</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>VNF#</span><span class='tstring_end'>&quot;</span></span>
					<span class='id identifier rubyid_virt_link_item'>virt_link_item</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>destination</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_virtual_link'>virtual_link</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>connections</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span>
					<span class='id identifier rubyid_virt_link_item'>virt_link_item</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>destination</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_slice!'>slice!</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>VNF#</span><span class='tstring_end'>&quot;</span></span>
					<span class='id identifier rubyid_virtual_links_array'>virtual_links_array</span><span class='period'>.</span><span class='id identifier rubyid_push'>push</span><span class='lparen'>(</span><span class='id identifier rubyid_virt_link_item'>virt_link_item</span><span class='rparen'>)</span>
				<span class='kw'>else</span>
					<span class='id identifier rubyid_virt_link_item'>virt_link_item</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>source</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_virtual_link'>virtual_link</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>connections</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span>
					<span class='id identifier rubyid_virt_link_item'>virt_link_item</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>source</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_slice!'>slice!</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>VNF#</span><span class='tstring_end'>&quot;</span></span>
					<span class='id identifier rubyid_virt_link_item'>virt_link_item</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>destination</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_virtual_link'>virtual_link</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>connections</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span>
					<span class='id identifier rubyid_virt_link_item'>virt_link_item</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>destination</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_slice!'>slice!</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>VNF#</span><span class='tstring_end'>&quot;</span></span>
					<span class='id identifier rubyid_virtual_links_array'>virtual_links_array</span><span class='period'>.</span><span class='id identifier rubyid_push'>push</span><span class='lparen'>(</span><span class='id identifier rubyid_virt_link_item'>virt_link_item</span><span class='rparen'>)</span>
				<span class='kw'>end</span>
			<span class='kw'>end</span>
		<span class='kw'>end</span>
	<span class='kw'>end</span>

	<span class='comment'># --TODO-- considering the first nfp only
</span>	<span class='id identifier rubyid_network_forwarding_paths'>network_forwarding_paths</span> <span class='op'>=</span> <span class='const'>Array</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
	<span class='id identifier rubyid_nsd_from_catalogue_hash'>nsd_from_catalogue_hash</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>vnffgd</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>vnffgs</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>network_forwarding_path</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_nfp'>nfp</span><span class='op'>|</span>
		<span class='id identifier rubyid_nfp_item'>nfp_item</span> <span class='op'>=</span> <span class='const'>Hash</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
		<span class='id identifier rubyid_connection_points'>connection_points</span> <span class='op'>=</span> <span class='const'>Array</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
		<span class='id identifier rubyid_nfp_item'>nfp_item</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>nfp_id</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_nfp'>nfp</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>nfp_id</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span>
		<span class='id identifier rubyid_nfp_item'>nfp_item</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>nfp_graph</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_nfp'>nfp</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>graph</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span>
		<span class='id identifier rubyid_nfp'>nfp</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>connection_points</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_cp'>cp</span><span class='op'>|</span>
			<span class='comment'># Again, I suppose that this array contained only the external connection points
</span>			<span class='comment'># more junk code to be compliant with the Marketplace generated VNFFGD
</span>			<span class='kw'>if</span> <span class='op'>!</span><span class='lparen'>(</span><span class='id identifier rubyid_cp'>cp</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>:</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
				<span class='id identifier rubyid_connection_points'>connection_points</span><span class='period'>.</span><span class='id identifier rubyid_push'>push</span><span class='lparen'>(</span><span class='id identifier rubyid_cp'>cp</span><span class='rparen'>)</span>
			<span class='kw'>end</span>
		<span class='kw'>end</span>
		<span class='id identifier rubyid_nfp_item'>nfp_item</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>connection_points</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_connection_points'>connection_points</span>
		<span class='id identifier rubyid_network_forwarding_paths'>network_forwarding_paths</span><span class='period'>.</span><span class='id identifier rubyid_push'>push</span><span class='lparen'>(</span><span class='id identifier rubyid_nfp_item'>nfp_item</span><span class='rparen'>)</span>
	<span class='kw'>end</span>


	<span class='id identifier rubyid_ns_out'>ns_out</span> <span class='op'>=</span> <span class='const'>Hash</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
	<span class='id identifier rubyid_ns_out'>ns_out</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>ns_id</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_ns_id'>ns_id</span>
	<span class='id identifier rubyid_ns_out'>ns_out</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>ns_sla</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_ns_sla'>ns_sla</span>
	<span class='id identifier rubyid_ns_out'>ns_out</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>vnf_id</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_vnf_id_array'>vnf_id_array</span>
	<span class='id identifier rubyid_ns_out'>ns_out</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>vnf_req</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_vnf_requirements'>vnf_requirements</span>
	<span class='id identifier rubyid_ns_out'>ns_out</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>virtual_links</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_virtual_links_array'>virtual_links_array</span>
	<span class='id identifier rubyid_ns_out'>ns_out</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>network_forwarding_paths</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_network_forwarding_paths'>network_forwarding_paths</span>
	<span class='kw'>if</span> <span class='lparen'>(</span> <span class='id identifier rubyid_requestbody_hash'>requestbody_hash</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>alpha</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='op'>!=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span> <span class='rparen'>)</span> <span class='op'>&amp;</span> <span class='lparen'>(</span> <span class='id identifier rubyid_is_number?'>is_number?</span><span class='lparen'>(</span><span class='id identifier rubyid_requestbody_hash'>requestbody_hash</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>alpha</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='rparen'>)</span> <span class='rparen'>)</span>
		<span class='id identifier rubyid_ns_out'>ns_out</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>alpha</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_requestbody_hash'>requestbody_hash</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>alpha</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span>
	<span class='kw'>end</span>
	<span class='kw'>if</span> <span class='lparen'>(</span> <span class='id identifier rubyid_requestbody_hash'>requestbody_hash</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>beta</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='op'>!=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span> <span class='rparen'>)</span> <span class='op'>&amp;</span> <span class='lparen'>(</span> <span class='id identifier rubyid_is_number?'>is_number?</span><span class='lparen'>(</span><span class='id identifier rubyid_requestbody_hash'>requestbody_hash</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>beta</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='rparen'>)</span> <span class='rparen'>)</span>
		<span class='id identifier rubyid_ns_out'>ns_out</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>beta</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_requestbody_hash'>requestbody_hash</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>beta</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span>
	<span class='kw'>end</span>
	<span class='kw'>if</span> <span class='lparen'>(</span> <span class='id identifier rubyid_requestbody_hash'>requestbody_hash</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>gamma</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='op'>!=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span> <span class='rparen'>)</span> <span class='op'>&amp;</span> <span class='lparen'>(</span> <span class='id identifier rubyid_is_number?'>is_number?</span><span class='lparen'>(</span><span class='id identifier rubyid_requestbody_hash'>requestbody_hash</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>gamma</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='rparen'>)</span> <span class='rparen'>)</span>
		<span class='id identifier rubyid_ns_out'>ns_out</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>gamma</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_requestbody_hash'>requestbody_hash</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>gamma</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span>
	<span class='kw'>end</span>
	<span class='kw'>if</span> <span class='lparen'>(</span><span class='id identifier rubyid_requestbody_hash'>requestbody_hash</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>fixVnf01</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='op'>!=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span> <span class='lparen'>(</span><span class='id identifier rubyid_requestbody_hash'>requestbody_hash</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>toPoP01</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='op'>!=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
		<span class='id identifier rubyid_ns_out'>ns_out</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>fixVnf01</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_requestbody_hash'>requestbody_hash</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>fixVnf01</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span>
		<span class='id identifier rubyid_ns_out'>ns_out</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>toPoP01</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_requestbody_hash'>requestbody_hash</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>toPoP01</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span>
	<span class='kw'>end</span>

	<span class='id identifier rubyid_nsreqFile'>nsreqFile</span> <span class='op'>=</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>bin/workspace/NS.json</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>w</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_f'>f</span><span class='op'>|</span>
		<span class='id identifier rubyid_f'>f</span><span class='period'>.</span><span class='id identifier rubyid_puts'>puts</span> <span class='const'>JSON</span><span class='period'>.</span><span class='id identifier rubyid_pretty_generate'>pretty_generate</span><span class='lparen'>(</span><span class='id identifier rubyid_ns_out'>ns_out</span><span class='rparen'>)</span>
	<span class='kw'>end</span>

	<span class='kw'>return</span> <span class='lbrace'>{</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>status</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='int'>0</span><span class='comma'>,</span>
			<span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>error</span><span class='tstring_end'>&#39;</span></span><span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Ok</span><span class='tstring_end'>&quot;</span></span><span class='rbrace'>}</span>

<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

      <div id="footer">
  Generated on Mon Oct 10 15:35:24 2016 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.5 (ruby-2.3.0).
</div>

    </div>
  </body>
</html>