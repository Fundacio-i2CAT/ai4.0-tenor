<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Class: VnfdToHot
  
    &mdash; Documentation by YARD 0.9.5
  
</title>

  <link rel="stylesheet" href="css/style.css" type="text/css" charset="utf-8" />

  <link rel="stylesheet" href="css/common.css" type="text/css" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  pathId = "VnfdToHot";
  relpath = '';
</script>


  <script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="class_list.html"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="_index.html">Index (V)</a> &raquo;
    
    
    <span class="title">VnfdToHot</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <iframe id="search_frame" src="class_list.html"></iframe>

      <div id="content"><h1>Class: VnfdToHot
  
  
  
</h1>
<div class="box_info">
  
  <dl>
    <dt>Inherits:</dt>
    <dd>
      <span class="inheritName">Object</span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next">VnfdToHot</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
    </dd>
  </dl>
  

  
  
  
  
  

  

  
  <dl>
    <dt>Defined in:</dt>
    <dd>hot-generator/models/vnfd_to_hot.rb</dd>
  </dl>
  
</div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    
<p>TeNOR - HOT Generator</p>

<p>Copyright 2014-2016 i2CAT Foundation, Portugal Telecom Inovação</p>

<p>Licensed under the Apache License, Version 2.0 (the “License”); you may not
use this file except in compliance with the License. You may obtain a copy
of the License at</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_http'>http</span><span class='symbol'>:/</span><span class='op'>/</span><span class='id identifier rubyid_www'>www</span><span class='period'>.</span><span class='id identifier rubyid_apache'>apache</span><span class='period'>.</span><span class='id identifier rubyid_org'>org</span><span class='op'>/</span><span class='id identifier rubyid_licenses'>licenses</span><span class='op'>/</span><span class='const'>LICENSE</span><span class='op'>-</span><span class='float'>2.0</span>
</code></pre>

<p>Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an “AS IS” BASIS, WITHOUT
WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
License for the specific language governing permissions and limitations
under the License.</p>


  </div>
</div>
<div class="tags">
  

</div>






  
    <h2>
      Instance Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#add_wait_condition-instance_method" title="#add_wait_condition (instance method)">#<strong>add_wait_condition</strong>(vdu)  &#x21d2; Hash </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Adds a Wait Condition resource to the VDU.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#add_wait_condition2-instance_method" title="#add_wait_condition2 (instance method)">#<strong>add_wait_condition2</strong>(vdu, hot)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#build-instance_method" title="#build (instance method)">#<strong>build</strong>(vnfd, tnova_flavour, networks_id, routers_id, security_group_id, vnfr_id, dns)  &#x21d2; HOT </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Converts VNFD to HOT.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#create_autoscale_group-instance_method" title="#create_autoscale_group (instance method)">#<strong>create_autoscale_group</strong>(cooldown, max_size, min_size, desired_capacity, resource)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#create_flavor-instance_method" title="#create_flavor (instance method)">#<strong>create_flavor</strong>(vdu)  &#x21d2; String </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Creates an HEAT flavor resource from the VNFD.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#create_image-instance_method" title="#create_image (instance method)">#<strong>create_image</strong>(vdu)  &#x21d2; String </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Creates an HEAT image resource from the VNFD.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#create_key_pair-instance_method" title="#create_key_pair (instance method)">#<strong>create_key_pair</strong>(keypair_name)  &#x21d2; String </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Creates an HEAT key pair resource.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#create_network-instance_method" title="#create_network (instance method)">#<strong>create_network</strong>(resource_name, network_name, port_security_enabled)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#create_networks-instance_method" title="#create_networks (instance method)">#<strong>create_networks</strong>(vlink, dns_server, router_id)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#create_ports-instance_method" title="#create_ports (instance method)">#<strong>create_ports</strong>(vdu_id, connection_points, vlinks, networks_id, security_group_id, router_interfaces)  &#x21d2; Array </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Creates an HEAT port resource from the VNFD.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#create_router_interface-instance_method" title="#create_router_interface (instance method)">#<strong>create_router_interface</strong>(router_id, subnet_name, port_name)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#create_scale_policy-instance_method" title="#create_scale_policy (instance method)">#<strong>create_scale_policy</strong>(auto_scaling_group, scaling_adjustment)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#create_server-instance_method" title="#create_server (instance method)">#<strong>create_server</strong>(vdu, image, flavour_name, ports, key_name, scale)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Creates an HEAT server resource from the VNFD.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#create_subnet-instance_method" title="#create_subnet (instance method)">#<strong>create_subnet</strong>(network_name, dns_server, cidr)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#generate_nested_template-instance_method" title="#generate_nested_template (instance method)">#<strong>generate_nested_template</strong>(vdu, vnfd, networks_id, security_group_id, nets, router_interfaces, router_id)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_resource_name-instance_method" title="#get_resource_name (instance method)">#<strong>get_resource_name</strong>  &#x21d2; String </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Generates a new resource name.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_resource_name_nested-instance_method" title="#get_resource_name_nested (instance method)">#<strong>get_resource_name_nested</strong>(hot)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">#<strong>initialize</strong>(name, description, public_network_id)  &#x21d2; VnfdToHot </a>
    

    
  </span>
  
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Initializes VnfdToHot object.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#parse_outputs-instance_method" title="#parse_outputs (instance method)">#<strong>parse_outputs</strong>(events)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Parse the outputs from the VNFD and builds an outputs hash.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#unit_converter-instance_method" title="#unit_converter (instance method)">#<strong>unit_converter</strong>(value, input_unit, output_unit)  &#x21d2; Numeric </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Converts a value to another unit.</p>
</div></span>
  
</li>

      
    </ul>
  

<div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <h3 class="signature first" id="initialize-instance_method">
  
    #<strong>initialize</strong>(name, description, public_network_id)  &#x21d2; <tt><span class='object_link'><a href="" title="VnfdToHot (class)">VnfdToHot</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Initializes VnfdToHot object</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>name</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="String.html" title="String (class)">String</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the name for the HOT</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>description</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="String.html" title="String (class)">String</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the description for the HOT</p>
</div>
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


24
25
26
27
28
29
30
31</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'hot-generator/models/vnfd_to_hot.rb', line 24</span>

<span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span><span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_description'>description</span><span class='comma'>,</span> <span class='id identifier rubyid_public_network_id'>public_network_id</span><span class='rparen'>)</span>
  <span class='ivar'>@hot</span> <span class='op'>=</span> <span class='const'>Hot</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_description'>description</span><span class='rparen'>)</span>
  <span class='ivar'>@name</span> <span class='op'>=</span> <span class='id identifier rubyid_name'>name</span>
  <span class='ivar'>@outputs</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
  <span class='ivar'>@type</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span>
  <span class='ivar'>@vnfr_id</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span>
  <span class='ivar'>@public_network_id</span> <span class='op'>=</span> <span class='id identifier rubyid_public_network_id'>public_network_id</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
  
</div>


  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="add_wait_condition-instance_method">
  
    #<strong>add_wait_condition</strong>(vdu)  &#x21d2; <tt>Hash</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Adds a Wait Condition resource to the VDU</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>vdu</span>
      
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the VDU from the VNFD</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the user_data script with the Wait Condition</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


426
427
428
429
430
431
432
433
434
435
436
437
438
439
440
441
442
443
444
445
446
447
448
449
450
451
452
453
454
455
456
457
458
459
460
461
462
463
464
465
466
467
468
469
470
471</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'hot-generator/models/vnfd_to_hot.rb', line 426</span>

<span class='kw'>def</span> <span class='id identifier rubyid_add_wait_condition'>add_wait_condition</span><span class='lparen'>(</span><span class='id identifier rubyid_vdu'>vdu</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_wc_handle_name'>wc_handle_name</span> <span class='op'>=</span> <span class='id identifier rubyid_get_resource_name'>get_resource_name</span>

  <span class='comment'>#if vdu[&#39;wc_notify&#39;]
</span>    <span class='kw'>if</span> <span class='ivar'>@type</span> <span class='op'>!=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>vSA</span><span class='tstring_end'>&#39;</span></span>
      <span class='ivar'>@hot</span><span class='period'>.</span><span class='id identifier rubyid_resources_list'>resources_list</span> <span class='op'>&lt;&lt;</span> <span class='const'>WaitConditionHandle</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_wc_handle_name'>wc_handle_name</span><span class='rparen'>)</span>
      <span class='ivar'>@hot</span><span class='period'>.</span><span class='id identifier rubyid_resources_list'>resources_list</span> <span class='op'>&lt;&lt;</span> <span class='const'>WaitCondition</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_get_resource_name'>get_resource_name</span><span class='comma'>,</span> <span class='id identifier rubyid_wc_handle_name'>wc_handle_name</span><span class='comma'>,</span> <span class='int'>2000</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
  <span class='comment'>#end
</span>
  <span class='id identifier rubyid_wc_notify'>wc_notify</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_wc_notify'>wc_notify</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\nwc_notify --data-binary &#39;{\&quot;status\&quot;: \&quot;SUCCESS\&quot;}&#39;\n</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>if</span> <span class='id identifier rubyid_vdu'>vdu</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>wc_notify</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_wc_notify'>wc_notify</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\nwc_notify --data-binary &#39;{\&quot;status\&quot;: \&quot;SUCCESS\&quot;}&#39;\n</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>
  <span class='kw'>if</span> <span class='ivar'>@type</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>vSBC</span><span class='tstring_end'>&#39;</span></span>
    <span class='id identifier rubyid_wc_notify'>wc_notify</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>elsif</span> <span class='ivar'>@type</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>vSA</span><span class='tstring_end'>&#39;</span></span>
    <span class='id identifier rubyid_wc_notify'>wc_notify</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>\n echo &quot;tenor_url: http://10.10.1.61:4000/vnf-provisioning/</span><span class='tstring_end'>&#39;</span></span><span class='op'>+</span> <span class='ivar'>@vnfr_id</span> <span class='op'>+</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/stack/create_complete&quot; &gt; /etc/tenor.cfg</span><span class='tstring_end'>&#39;</span></span>
    <span class='id identifier rubyid_wc_notify'>wc_notify</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>\n echo curl -XPOST http://10.10.1.61:4000/vnf-provisioning/</span><span class='tstring_end'>&#39;</span></span><span class='op'>+</span> <span class='ivar'>@vnfr_id</span> <span class='op'>+</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/stack/create_complete -d &quot;info&quot; </span><span class='tstring_end'>&#39;</span></span>
    <span class='id identifier rubyid_wc_notify'>wc_notify</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span>
    <span class='id identifier rubyid_wc_notify'>wc_notify</span> <span class='op'>=</span> <span class='id identifier rubyid_wc_notify'>wc_notify</span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\nwc_notify --data-binary &#39;{\&quot;status\&quot;: \&quot;SUCCESS\&quot;}&#39;\n</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>

  <span class='comment'>#if vdu[&#39;wc_notify&#39;]
</span>    <span class='id identifier rubyid_shell'>shell</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>#!/bin/bash</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>if</span> <span class='ivar'>@type</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>vSA</span><span class='tstring_end'>&#39;</span></span>
      <span class='id identifier rubyid_shell'>shell</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>#!/bin/tcsh</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>end</span>
    <span class='kw'>if</span> <span class='ivar'>@type</span> <span class='op'>!=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>vSA</span><span class='tstring_end'>&#39;</span></span>
      <span class='id identifier rubyid_bootstrap_script'>bootstrap_script</span> <span class='op'>=</span> <span class='id identifier rubyid_vdu'>vdu</span><span class='period'>.</span><span class='id identifier rubyid_has_key?'>has_key?</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>bootstrap_script</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='op'>?</span> <span class='id identifier rubyid_vdu'>vdu</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>bootstrap_script</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='op'>:</span> <span class='id identifier rubyid_shell'>shell</span>
      <span class='lbrace'>{</span>
          <span class='label'>str_replace:</span> <span class='lbrace'>{</span>
              <span class='label'>params:</span> <span class='lbrace'>{</span>
                  <span class='label'>wc_notify:</span> <span class='lbrace'>{</span>
                      <span class='label'>get_attr:</span> <span class='lbracket'>[</span><span class='id identifier rubyid_wc_handle_name'>wc_handle_name</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>curl_cli</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
                  <span class='rbrace'>}</span>
              <span class='rbrace'>}</span><span class='comma'>,</span>
              <span class='label'>template:</span> <span class='id identifier rubyid_bootstrap_script'>bootstrap_script</span> <span class='op'>+</span> <span class='id identifier rubyid_wc_notify'>wc_notify</span>
          <span class='rbrace'>}</span>
      <span class='rbrace'>}</span>
    <span class='kw'>else</span>
      <span class='id identifier rubyid_bootstrap_script'>bootstrap_script</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>#!/bin/bash</span><span class='tstring_end'>&quot;</span></span> <span class='op'>+</span> <span class='id identifier rubyid_wc_notify'>wc_notify</span>
    <span class='kw'>end</span>
  <span class='comment'>#end
</span><span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="add_wait_condition2-instance_method">
  
    #<strong>add_wait_condition2</strong>(vdu, hot)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


473
474
475
476
477
478
479
480
481
482
483
484
485
486
487
488
489
490
491
492
493
494
495
496
497
498
499
500
501
502
503
504
505</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'hot-generator/models/vnfd_to_hot.rb', line 473</span>

<span class='kw'>def</span> <span class='id identifier rubyid_add_wait_condition2'>add_wait_condition2</span><span class='lparen'>(</span><span class='id identifier rubyid_vdu'>vdu</span><span class='comma'>,</span> <span class='id identifier rubyid_hot'>hot</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_wc_handle_name'>wc_handle_name</span> <span class='op'>=</span> <span class='id identifier rubyid_get_resource_name_nested'>get_resource_name_nested</span><span class='lparen'>(</span><span class='id identifier rubyid_hot'>hot</span><span class='rparen'>)</span>

  <span class='comment'>#if vdu[&#39;wc_notify&#39;]
</span>  <span class='kw'>if</span> <span class='ivar'>@type</span> <span class='op'>!=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>vSA</span><span class='tstring_end'>&#39;</span></span> <span class='op'>&amp;&amp;</span> <span class='op'>!</span><span class='id identifier rubyid_vdu'>vdu</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>wc_notify</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
    <span class='id identifier rubyid_hot'>hot</span><span class='period'>.</span><span class='id identifier rubyid_resources_list'>resources_list</span> <span class='op'>&lt;&lt;</span> <span class='const'>WaitConditionHandle</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_wc_handle_name'>wc_handle_name</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_hot'>hot</span><span class='period'>.</span><span class='id identifier rubyid_resources_list'>resources_list</span> <span class='op'>&lt;&lt;</span> <span class='const'>WaitCondition</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_get_resource_name_nested'>get_resource_name_nested</span><span class='lparen'>(</span><span class='id identifier rubyid_hot'>hot</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='id identifier rubyid_wc_handle_name'>wc_handle_name</span><span class='comma'>,</span> <span class='int'>2000</span><span class='rparen'>)</span>
    <span class='comment'>#end
</span>  <span class='kw'>end</span>

  <span class='id identifier rubyid_wc_notify'>wc_notify</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_wc_notify'>wc_notify</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\nwc_notify --data-binary &#39;{\&quot;status\&quot;: \&quot;SUCCESS\&quot;}&#39;\n</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>if</span> <span class='id identifier rubyid_vdu'>vdu</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>wc_notify</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_wc_notify'>wc_notify</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\nwc_notify --data-binary &#39;{\&quot;status\&quot;: \&quot;SUCCESS\&quot;}&#39;\n</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_shell'>shell</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>#!/bin/bash</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>if</span> <span class='ivar'>@type</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>vSA</span><span class='tstring_end'>&#39;</span></span>
    <span class='id identifier rubyid_shell'>shell</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>#!/bin/tcsh</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_bootstrap_script'>bootstrap_script</span> <span class='op'>=</span> <span class='id identifier rubyid_vdu'>vdu</span><span class='period'>.</span><span class='id identifier rubyid_has_key?'>has_key?</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>bootstrap_script</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='op'>?</span> <span class='id identifier rubyid_vdu'>vdu</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>bootstrap_script</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='op'>:</span> <span class='id identifier rubyid_shell'>shell</span>
  <span class='lbrace'>{</span>
      <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>str_replace</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='lbrace'>{</span>
          <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>params</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='lbrace'>{</span>
              <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>wc_notify</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='lbrace'>{</span>
                  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>get_attr</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='lbracket'>[</span><span class='id identifier rubyid_wc_handle_name'>wc_handle_name</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>curl_cli</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
              <span class='rbrace'>}</span>
          <span class='rbrace'>}</span><span class='comma'>,</span>
          <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>template</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_bootstrap_script'>bootstrap_script</span> <span class='op'>+</span> <span class='id identifier rubyid_wc_notify'>wc_notify</span>
      <span class='rbrace'>}</span>
  <span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="build-instance_method">
  
    #<strong>build</strong>(vnfd, tnova_flavour, networks_id, routers_id, security_group_id, vnfr_id, dns)  &#x21d2; <tt>HOT</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Converts VNFD to HOT</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>vnfd</span>
      
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the VNFD</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>tnova_flavour</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="String.html" title="String (class)">String</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the T-NOVA flavour to generate the HOT for</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>networks_id</span>
      
      
        <span class='type'>(<tt>Array</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the IDs of the networks created by NS Manager</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>security_group_id</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="String.html" title="String (class)">String</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the ID of the T-NOVA security group</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>HOT</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>returns an HOT object</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="CustomException/NoFlavorError.html" title="CustomException::NoFlavorError (class)">CustomException::NoFlavorError</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'hot-generator/models/vnfd_to_hot.rb', line 40</span>

<span class='kw'>def</span> <span class='id identifier rubyid_build'>build</span><span class='lparen'>(</span><span class='id identifier rubyid_vnfd'>vnfd</span><span class='comma'>,</span> <span class='id identifier rubyid_tnova_flavour'>tnova_flavour</span><span class='comma'>,</span> <span class='id identifier rubyid_networks_id'>networks_id</span><span class='comma'>,</span> <span class='id identifier rubyid_routers_id'>routers_id</span><span class='comma'>,</span> <span class='id identifier rubyid_security_group_id'>security_group_id</span><span class='comma'>,</span> <span class='id identifier rubyid_vnfr_id'>vnfr_id</span><span class='comma'>,</span> <span class='id identifier rubyid_dns'>dns</span><span class='rparen'>)</span>
  <span class='comment'># Parse needed outputs
</span>  <span class='id identifier rubyid_parse_outputs'>parse_outputs</span><span class='lparen'>(</span><span class='id identifier rubyid_vnfd'>vnfd</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>vnf_lifecycle_events</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_find'>find</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_lifecycle'>lifecycle</span><span class='op'>|</span> <span class='id identifier rubyid_lifecycle'>lifecycle</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>flavor_id_ref</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='id identifier rubyid_tnova_flavour'>tnova_flavour</span> <span class='rbrace'>}</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>events</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='rparen'>)</span>

  <span class='ivar'>@type</span> <span class='op'>=</span> <span class='id identifier rubyid_vnfd'>vnfd</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>type</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
  <span class='ivar'>@vnfr_id</span> <span class='op'>=</span> <span class='id identifier rubyid_vnfr_id'>vnfr_id</span>

  <span class='id identifier rubyid_key'>key</span> <span class='op'>=</span> <span class='id identifier rubyid_create_key_pair'>create_key_pair</span><span class='lparen'>(</span><span class='const'>SecureRandom</span><span class='period'>.</span><span class='id identifier rubyid_urlsafe_base64'>urlsafe_base64</span><span class='lparen'>(</span><span class='int'>9</span><span class='rparen'>)</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_router_id'>router_id</span> <span class='op'>=</span> <span class='id identifier rubyid_routers_id'>routers_id</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>id</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>

  <span class='comment'># Get T-NOVA deployment flavour
</span>  <span class='id identifier rubyid_deployment_information'>deployment_information</span> <span class='op'>=</span> <span class='id identifier rubyid_vnfd'>vnfd</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>deployment_flavours</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_detect'>detect</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_flavour'>flavour</span><span class='op'>|</span> <span class='id identifier rubyid_flavour'>flavour</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>id</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='id identifier rubyid_tnova_flavour'>tnova_flavour</span> <span class='rbrace'>}</span>
  <span class='id identifier rubyid_raise'>raise</span> <span class='const'>CustomException</span><span class='op'>::</span><span class='const'>NoFlavorError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Flavor </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_tnova_flavour'>tnova_flavour</span><span class='embexpr_end'>}</span><span class='tstring_content'> not found</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>if</span> <span class='id identifier rubyid_deployment_information'>deployment_information</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>

  <span class='comment'># Get the vlinks references for the deployment flavour
</span>  <span class='id identifier rubyid_vlinks'>vlinks</span> <span class='op'>=</span> <span class='id identifier rubyid_deployment_information'>deployment_information</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>vlink_reference</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>

  <span class='id identifier rubyid_networks_id'>networks_id</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_router_interfaces'>router_interfaces</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>

  <span class='id identifier rubyid_vlinks'>vlinks</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_vlink'>vlink</span><span class='op'>|</span>
    <span class='id identifier rubyid_vlink_json'>vlink_json</span> <span class='op'>=</span> <span class='id identifier rubyid_vnfd'>vnfd</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>vlinks</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_detect'>detect</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_vl'>vl</span><span class='op'>|</span> <span class='id identifier rubyid_vl'>vl</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>id</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='id identifier rubyid_vlink'>vlink</span> <span class='rbrace'>}</span>
    <span class='kw'>if</span> <span class='op'>!</span><span class='id identifier rubyid_vlink_json'>vlink_json</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>existing_net_id</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
      <span class='id identifier rubyid_networks_id'>networks_id</span> <span class='op'>&lt;&lt;</span> <span class='lbrace'>{</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>id</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_vlink'>vlink</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>alias</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_vlink_json'>vlink_json</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>alias</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>heat_id</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_vlink_json'>vlink_json</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>existing_net_id</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='rbrace'>}</span>
    <span class='kw'>else</span>
      <span class='id identifier rubyid_net_name'>net_name</span><span class='comma'>,</span> <span class='id identifier rubyid_router_interface'>router_interface</span> <span class='op'>=</span> <span class='id identifier rubyid_create_networks'>create_networks</span><span class='lparen'>(</span><span class='id identifier rubyid_vlink_json'>vlink_json</span><span class='comma'>,</span> <span class='id identifier rubyid_dns'>dns</span><span class='comma'>,</span> <span class='id identifier rubyid_router_id'>router_id</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_networks_id'>networks_id</span> <span class='op'>&lt;&lt;</span> <span class='lbrace'>{</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>id</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_vlink'>vlink</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>alias</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_vlink_json'>vlink_json</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>alias</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>heat</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_vlink'>vlink</span><span class='rbrace'>}</span>
      <span class='id identifier rubyid_router_interfaces'>router_interfaces</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_router_interface'>router_interface</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_deployment_information'>deployment_information</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>vdu_reference</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_vdu_ref'>vdu_ref</span><span class='op'>|</span>
    <span class='comment'># Get VDU for deployment
</span>    <span class='id identifier rubyid_vdu'>vdu</span> <span class='op'>=</span> <span class='id identifier rubyid_vnfd'>vnfd</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>vdu</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_detect'>detect</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_vdu'>vdu</span><span class='op'>|</span> <span class='id identifier rubyid_vdu'>vdu</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>id</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='id identifier rubyid_vdu_ref'>vdu_ref</span> <span class='rbrace'>}</span>

    <span class='kw'>if</span> <span class='id identifier rubyid_vdu'>vdu</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>vm_image_format</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>openstack_id</span><span class='tstring_end'>&#39;</span></span>
      <span class='id identifier rubyid_image_name'>image_name</span> <span class='op'>=</span> <span class='id identifier rubyid_vdu'>vdu</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>vm_image</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
    <span class='kw'>else</span>
      <span class='id identifier rubyid_image_name'>image_name</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='label'>get_resource:</span> <span class='id identifier rubyid_create_image'>create_image</span><span class='lparen'>(</span><span class='id identifier rubyid_vdu'>vdu</span><span class='rparen'>)</span><span class='rbrace'>}</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_flavor_name'>flavor_name</span> <span class='op'>=</span> <span class='id identifier rubyid_create_flavor'>create_flavor</span><span class='lparen'>(</span><span class='id identifier rubyid_vdu'>vdu</span><span class='rparen'>)</span>

    <span class='comment'>#ports = create_ports(vdu[&#39;id&#39;], vdu[&#39;connection_points&#39;], vnfd[&#39;vlinks&#39;], networks_id, security_group_id)
</span>    <span class='id identifier rubyid_nets'>nets</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_vdu'>vdu</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>connection_points</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_connection_point'>connection_point</span><span class='op'>|</span>
      <span class='id identifier rubyid_l'>l</span> <span class='op'>=</span> <span class='id identifier rubyid_networks_id'>networks_id</span><span class='period'>.</span><span class='id identifier rubyid_find'>find</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_vlink'>vlink</span><span class='op'>|</span> <span class='id identifier rubyid_vlink'>vlink</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>id</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='id identifier rubyid_connection_point'>connection_point</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>vlink_ref</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='rbrace'>}</span>
      <span class='id identifier rubyid_nets'>nets</span> <span class='op'>&lt;&lt;</span> <span class='lbrace'>{</span><span class='symbol'>:network</span> <span class='op'>=&gt;</span> <span class='lbrace'>{</span><span class='label'>get_resource:</span> <span class='id identifier rubyid_l'>l</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>heat</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='rbrace'>}</span><span class='rbrace'>}</span>
    <span class='kw'>end</span>

    <span class='comment'>#create AutoScalingGroup if the VNF can scale
</span>    <span class='kw'>if</span> <span class='lparen'>(</span><span class='id identifier rubyid_vdu'>vdu</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>scale_in_out</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>maximum</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='op'>&gt;</span> <span class='int'>10</span><span class='rparen'>)</span>
      <span class='comment'>#generate template for server
</span>      <span class='id identifier rubyid_nested_template'>nested_template</span> <span class='op'>=</span> <span class='id identifier rubyid_generate_nested_template'>generate_nested_template</span><span class='lparen'>(</span><span class='id identifier rubyid_vdu'>vdu</span><span class='comma'>,</span> <span class='id identifier rubyid_vnfd'>vnfd</span><span class='comma'>,</span> <span class='id identifier rubyid_networks_id'>networks_id</span><span class='comma'>,</span> <span class='id identifier rubyid_security_group_id'>security_group_id</span><span class='comma'>,</span> <span class='id identifier rubyid_nets'>nets</span><span class='comma'>,</span> <span class='id identifier rubyid_router_interfaces'>router_interfaces</span><span class='comma'>,</span> <span class='id identifier rubyid_router_id'>router_id</span><span class='rparen'>)</span>

      <span class='comment'>#save template in folder
</span>      <span class='id identifier rubyid_name'>name</span> <span class='op'>=</span> <span class='id identifier rubyid_vnfd'>vnfd</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>id</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span>
      <span class='id identifier rubyid_filename'>filename</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>assets/templates/</span><span class='tstring_end'>&quot;</span></span> <span class='op'>+</span> <span class='id identifier rubyid_name'>name</span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>.yaml</span><span class='tstring_end'>&quot;</span></span>
      <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span><span class='lparen'>(</span><span class='id identifier rubyid_filename'>filename</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>w</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_file'>file</span><span class='op'>|</span> <span class='id identifier rubyid_file'>file</span><span class='period'>.</span><span class='id identifier rubyid_write'>write</span><span class='lparen'>(</span><span class='id identifier rubyid_nested_template'>nested_template</span><span class='period'>.</span><span class='id identifier rubyid_to_yaml'>to_yaml</span><span class='rparen'>)</span> <span class='rbrace'>}</span>

      <span class='id identifier rubyid_url'>url</span> <span class='op'>=</span> <span class='const'>HotGenerator</span><span class='period'>.</span><span class='id identifier rubyid_manager'>manager</span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/files/</span><span class='tstring_end'>&quot;</span></span> <span class='op'>+</span> <span class='id identifier rubyid_name'>name</span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>.yaml</span><span class='tstring_end'>&quot;</span></span>
      <span class='id identifier rubyid_properties'>properties</span> <span class='op'>=</span> <span class='lbrace'>{</span>
          <span class='symbol'>:image</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_image_name'>image_name</span><span class='comma'>,</span>
          <span class='symbol'>:flavor</span> <span class='op'>=&gt;</span> <span class='lbrace'>{</span><span class='label'>get_resource:</span> <span class='id identifier rubyid_flavor_name'>flavor_name</span><span class='rbrace'>}</span>
      <span class='rbrace'>}</span>

      <span class='id identifier rubyid_networks_id'>networks_id</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_net'>net</span><span class='op'>|</span>
        <span class='id identifier rubyid_properties'>properties</span><span class='lbracket'>[</span><span class='id identifier rubyid_net'>net</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>heat</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>get_resource</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_net'>net</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>heat</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='rbrace'>}</span>
      <span class='kw'>end</span>
      <span class='id identifier rubyid_router_interfaces'>router_interfaces</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_iface'>iface</span><span class='op'>|</span>
        <span class='id identifier rubyid_properties'>properties</span><span class='lbracket'>[</span><span class='id identifier rubyid_iface'>iface</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>get_resource</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_iface'>iface</span><span class='rbrace'>}</span>
      <span class='kw'>end</span>
      <span class='comment'>#properties[&#39;depends_on&#39;] = router_interfaces
</span>
      <span class='id identifier rubyid_scaled_resource'>scaled_resource</span> <span class='op'>=</span> <span class='const'>GenericResource</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_vdu'>vdu</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>id</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='id identifier rubyid_url'>url</span><span class='comma'>,</span> <span class='id identifier rubyid_properties'>properties</span><span class='comma'>,</span> <span class='id identifier rubyid_router_interfaces'>router_interfaces</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_auto_scale_group'>auto_scale_group</span> <span class='op'>=</span> <span class='id identifier rubyid_create_autoscale_group'>create_autoscale_group</span><span class='lparen'>(</span><span class='int'>60</span><span class='comma'>,</span> <span class='id identifier rubyid_vdu'>vdu</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>scale_in_out</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>maximum</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='id identifier rubyid_vdu'>vdu</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>scale_in_out</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>minimum</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='int'>1</span><span class='comma'>,</span> <span class='id identifier rubyid_scaled_resource'>scaled_resource</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_scale_out_policy'>scale_out_policy</span> <span class='op'>=</span> <span class='id identifier rubyid_create_scale_policy'>create_scale_policy</span><span class='lparen'>(</span><span class='id identifier rubyid_auto_scale_group'>auto_scale_group</span><span class='comma'>,</span> <span class='int'>1</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_scale_in_policy'>scale_in_policy</span> <span class='op'>=</span> <span class='id identifier rubyid_create_scale_policy'>create_scale_policy</span><span class='lparen'>(</span><span class='id identifier rubyid_auto_scale_group'>auto_scale_group</span><span class='comma'>,</span> <span class='op'>-</span><span class='int'>1</span><span class='rparen'>)</span>
      <span class='ivar'>@hot</span><span class='period'>.</span><span class='id identifier rubyid_outputs_list'>outputs_list</span> <span class='op'>&lt;&lt;</span> <span class='const'>Output</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_vdu'>vdu</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>id</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>#scale_out_url</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Url of scale out.</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='lbrace'>{</span><span class='label'>get_attr:</span> <span class='lbracket'>[</span><span class='id identifier rubyid_scale_out_policy'>scale_out_policy</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>alarm_url</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='rbrace'>}</span><span class='rparen'>)</span>
      <span class='ivar'>@hot</span><span class='period'>.</span><span class='id identifier rubyid_outputs_list'>outputs_list</span> <span class='op'>&lt;&lt;</span> <span class='const'>Output</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_vdu'>vdu</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>id</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>#scale_in_url</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Url of scale in.</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='lbrace'>{</span><span class='label'>get_attr:</span> <span class='lbracket'>[</span><span class='id identifier rubyid_scale_in_policy'>scale_in_policy</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>alarm_url</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='rbrace'>}</span><span class='rparen'>)</span>
      <span class='ivar'>@hot</span><span class='period'>.</span><span class='id identifier rubyid_outputs_list'>outputs_list</span> <span class='op'>&lt;&lt;</span> <span class='const'>Output</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_vdu'>vdu</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>id</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>#scale_group</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_vdu'>vdu</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>id</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'> ID</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='lbrace'>{</span><span class='label'>get_resource:</span> <span class='id identifier rubyid_auto_scale_group'>auto_scale_group</span><span class='rbrace'>}</span><span class='rparen'>)</span>
    <span class='kw'>else</span>
      <span class='id identifier rubyid_ports'>ports</span> <span class='op'>=</span> <span class='id identifier rubyid_create_ports'>create_ports</span><span class='lparen'>(</span><span class='id identifier rubyid_vdu'>vdu</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>id</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='id identifier rubyid_vdu'>vdu</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>connection_points</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='id identifier rubyid_vnfd'>vnfd</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>vlinks</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='id identifier rubyid_networks_id'>networks_id</span><span class='comma'>,</span> <span class='id identifier rubyid_security_group_id'>security_group_id</span><span class='comma'>,</span> <span class='id identifier rubyid_router_interfaces'>router_interfaces</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_create_server'>create_server</span><span class='lparen'>(</span><span class='id identifier rubyid_vdu'>vdu</span><span class='comma'>,</span> <span class='id identifier rubyid_image_name'>image_name</span><span class='comma'>,</span> <span class='id identifier rubyid_flavor_name'>flavor_name</span><span class='comma'>,</span> <span class='id identifier rubyid_ports'>ports</span><span class='comma'>,</span> <span class='id identifier rubyid_key'>key</span><span class='comma'>,</span> <span class='kw'>false</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>

  <span class='ivar'>@hot</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="create_autoscale_group-instance_method">
  
    #<strong>create_autoscale_group</strong>(cooldown, max_size, min_size, desired_capacity, resource)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


547
548
549
550
551</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'hot-generator/models/vnfd_to_hot.rb', line 547</span>

<span class='kw'>def</span> <span class='id identifier rubyid_create_autoscale_group'>create_autoscale_group</span><span class='lparen'>(</span><span class='id identifier rubyid_cooldown'>cooldown</span><span class='comma'>,</span> <span class='id identifier rubyid_max_size'>max_size</span><span class='comma'>,</span> <span class='id identifier rubyid_min_size'>min_size</span><span class='comma'>,</span> <span class='id identifier rubyid_desired_capacity'>desired_capacity</span><span class='comma'>,</span> <span class='id identifier rubyid_resource'>resource</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_name'>name</span> <span class='op'>=</span> <span class='id identifier rubyid_get_resource_name'>get_resource_name</span>
  <span class='ivar'>@hot</span><span class='period'>.</span><span class='id identifier rubyid_resources_list'>resources_list</span> <span class='op'>&lt;&lt;</span> <span class='const'>AutoScalingGroup</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_cooldown'>cooldown</span><span class='comma'>,</span> <span class='id identifier rubyid_max_size'>max_size</span><span class='comma'>,</span> <span class='id identifier rubyid_min_size'>min_size</span><span class='comma'>,</span> <span class='id identifier rubyid_desired_capacity'>desired_capacity</span><span class='comma'>,</span> <span class='id identifier rubyid_resource'>resource</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_name'>name</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="create_flavor-instance_method">
  
    #<strong>create_flavor</strong>(vdu)  &#x21d2; <tt><span class='object_link'><a href="String.html" title="String (class)">String</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Creates an HEAT flavor resource from the VNFD</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>vdu</span>
      
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the VDU from the VNFD</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="String.html" title="String (class)">String</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the name of the created resource</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


382
383
384
385
386
387
388
389
390
391</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'hot-generator/models/vnfd_to_hot.rb', line 382</span>

<span class='kw'>def</span> <span class='id identifier rubyid_create_flavor'>create_flavor</span><span class='lparen'>(</span><span class='id identifier rubyid_vdu'>vdu</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_name'>name</span> <span class='op'>=</span> <span class='id identifier rubyid_get_resource_name'>get_resource_name</span>
  <span class='id identifier rubyid_storage_info'>storage_info</span> <span class='op'>=</span> <span class='id identifier rubyid_vdu'>vdu</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>resource_requirements</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>storage</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
  <span class='ivar'>@hot</span><span class='period'>.</span><span class='id identifier rubyid_resources_list'>resources_list</span> <span class='op'>&lt;&lt;</span> <span class='const'>Flavor</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span>
      <span class='id identifier rubyid_name'>name</span><span class='comma'>,</span>
      <span class='id identifier rubyid_unit_converter'>unit_converter</span><span class='lparen'>(</span><span class='id identifier rubyid_storage_info'>storage_info</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>size</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='id identifier rubyid_storage_info'>storage_info</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>size_unit</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>gb</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='comma'>,</span>
      <span class='id identifier rubyid_unit_converter'>unit_converter</span><span class='lparen'>(</span><span class='id identifier rubyid_vdu'>vdu</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>resource_requirements</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>memory</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='id identifier rubyid_vdu'>vdu</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>resource_requirements</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>memory_unit</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>mb</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='comma'>,</span>
      <span class='id identifier rubyid_vdu'>vdu</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>resource_requirements</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>vcpus</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_name'>name</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="create_image-instance_method">
  
    #<strong>create_image</strong>(vdu)  &#x21d2; <tt><span class='object_link'><a href="String.html" title="String (class)">String</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Creates an HEAT image resource from the VNFD</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>vdu</span>
      
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the VDU from the VNFD</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="String.html" title="String (class)">String</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the name of the created resource</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="CustomException/NoExtensionError.html" title="CustomException::NoExtensionError (class)">CustomException::NoExtensionError</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


312
313
314
315
316
317
318
319
320</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'hot-generator/models/vnfd_to_hot.rb', line 312</span>

<span class='kw'>def</span> <span class='id identifier rubyid_create_image'>create_image</span><span class='lparen'>(</span><span class='id identifier rubyid_vdu'>vdu</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_name'>name</span> <span class='op'>=</span> <span class='id identifier rubyid_get_resource_name'>get_resource_name</span>

  <span class='id identifier rubyid_raise'>raise</span> <span class='const'>CustomException</span><span class='op'>::</span><span class='const'>NoExtensionError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_vdu'>vdu</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>vm_image</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'> does not have a file extension</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>if</span> <span class='id identifier rubyid_vdu'>vdu</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>vm_image_format</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
  <span class='id identifier rubyid_raise'>raise</span> <span class='const'>CustomException</span><span class='op'>::</span><span class='const'>InvalidExtensionError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_vdu'>vdu</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>vm_image</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'> has an invalid extension. Allowed extensions: ami, ari, aki, vhd, vmdk, raw, qcow2, vdi and iso</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>unless</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>ami</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>ari</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>aki</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>vhd</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>vmdk</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>raw</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>qcow2</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>vdi</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>iso</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span> <span class='id identifier rubyid_vdu'>vdu</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>vm_image_format</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>

  <span class='ivar'>@hot</span><span class='period'>.</span><span class='id identifier rubyid_resources_list'>resources_list</span> <span class='op'>&lt;&lt;</span> <span class='const'>Image</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_vdu'>vdu</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>vm_image_format</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='id identifier rubyid_vdu'>vdu</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>vm_image</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_name'>name</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="create_key_pair-instance_method">
  
    #<strong>create_key_pair</strong>(keypair_name)  &#x21d2; <tt><span class='object_link'><a href="String.html" title="String (class)">String</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Creates an HEAT key pair resource</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>keypair_name</span>
      
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the Name of the KeyPair</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="String.html" title="String (class)">String</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the name of the created resource</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


300
301
302
303
304
305
306</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'hot-generator/models/vnfd_to_hot.rb', line 300</span>

<span class='kw'>def</span> <span class='id identifier rubyid_create_key_pair'>create_key_pair</span><span class='lparen'>(</span><span class='id identifier rubyid_keypair_name'>keypair_name</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_name'>name</span> <span class='op'>=</span> <span class='id identifier rubyid_get_resource_name'>get_resource_name</span>

  <span class='ivar'>@hot</span><span class='period'>.</span><span class='id identifier rubyid_resources_list'>resources_list</span> <span class='op'>&lt;&lt;</span> <span class='const'>KeyPair</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_keypair_name'>keypair_name</span><span class='rparen'>)</span>
  <span class='ivar'>@hot</span><span class='period'>.</span><span class='id identifier rubyid_outputs_list'>outputs_list</span> <span class='op'>&lt;&lt;</span> <span class='const'>Output</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>private_key</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Private key</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='lbrace'>{</span><span class='label'>get_attr:</span> <span class='lbracket'>[</span><span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>private_key</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_name'>name</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="create_network-instance_method">
  
    #<strong>create_network</strong>(resource_name, network_name, port_security_enabled)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


228
229
230
231
232</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'hot-generator/models/vnfd_to_hot.rb', line 228</span>

<span class='kw'>def</span> <span class='id identifier rubyid_create_network'>create_network</span><span class='lparen'>(</span><span class='id identifier rubyid_resource_name'>resource_name</span><span class='comma'>,</span> <span class='id identifier rubyid_network_name'>network_name</span><span class='comma'>,</span> <span class='id identifier rubyid_port_security_enabled'>port_security_enabled</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_name'>name</span> <span class='op'>=</span> <span class='id identifier rubyid_get_resource_name'>get_resource_name</span>
  <span class='ivar'>@hot</span><span class='period'>.</span><span class='id identifier rubyid_resources_list'>resources_list</span> <span class='op'>&lt;&lt;</span> <span class='const'>Network</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_resource_name'>resource_name</span><span class='comma'>,</span> <span class='id identifier rubyid_network_name'>network_name</span><span class='comma'>,</span> <span class='id identifier rubyid_port_security_enabled'>port_security_enabled</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_name'>name</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="create_networks-instance_method">
  
    #<strong>create_networks</strong>(vlink, dns_server, router_id)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'hot-generator/models/vnfd_to_hot.rb', line 209</span>

<span class='kw'>def</span> <span class='id identifier rubyid_create_networks'>create_networks</span><span class='lparen'>(</span><span class='id identifier rubyid_vlink'>vlink</span><span class='comma'>,</span> <span class='id identifier rubyid_dns_server'>dns_server</span><span class='comma'>,</span> <span class='id identifier rubyid_router_id'>router_id</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_network_name'>network_name</span> <span class='op'>=</span> <span class='id identifier rubyid_create_network'>create_network</span><span class='lparen'>(</span><span class='id identifier rubyid_vlink'>vlink</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>id</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='id identifier rubyid_vlink'>vlink</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>alias</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='id identifier rubyid_vlink'>vlink</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>port_security_enabled</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_vlink'>vlink</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>net_segment</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_vlink'>vlink</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>net_segment</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='op'>!=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span>
    <span class='id identifier rubyid_cidr'>cidr</span> <span class='op'>=</span> <span class='id identifier rubyid_vlink'>vlink</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>net_segment</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_cidr'>cidr</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>192.</span><span class='tstring_end'>&quot;</span></span> <span class='op'>+</span> <span class='id identifier rubyid_rand'>rand</span><span class='lparen'>(</span><span class='int'>256</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>.</span><span class='tstring_end'>&quot;</span></span> <span class='op'>+</span> <span class='id identifier rubyid_rand'>rand</span><span class='lparen'>(</span><span class='int'>256</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>.0/24</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_subnet_name'>subnet_name</span> <span class='op'>=</span> <span class='id identifier rubyid_create_subnet'>create_subnet</span><span class='lparen'>(</span><span class='id identifier rubyid_vlink'>vlink</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>id</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='id identifier rubyid_dns_server'>dns_server</span><span class='comma'>,</span> <span class='id identifier rubyid_cidr'>cidr</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_vlink'>vlink</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>connectivity_type</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>E-LAN</span><span class='tstring_end'>&#39;</span></span>
    <span class='comment'>#create_router_interface(router_id, subnet_name)
</span>  <span class='kw'>elsif</span> <span class='id identifier rubyid_vlink'>vlink</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>connectivity_type</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>E-LINE</span><span class='tstring_end'>&#39;</span></span>
    <span class='comment'>#nothig to do
</span>  <span class='kw'>end</span>

  <span class='id identifier rubyid_router_interface'>router_interface</span> <span class='op'>=</span> <span class='id identifier rubyid_create_router_interface'>create_router_interface</span><span class='lparen'>(</span><span class='id identifier rubyid_router_id'>router_id</span><span class='comma'>,</span> <span class='id identifier rubyid_subnet_name'>subnet_name</span><span class='comma'>,</span> <span class='kw'>nil</span><span class='rparen'>)</span>

  <span class='kw'>return</span> <span class='id identifier rubyid_network_name'>network_name</span><span class='comma'>,</span> <span class='id identifier rubyid_router_interface'>router_interface</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="create_ports-instance_method">
  
    #<strong>create_ports</strong>(vdu_id, connection_points, vlinks, networks_id, security_group_id, router_interfaces)  &#x21d2; <tt>Array</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Creates an HEAT port resource from the VNFD</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>vdu_id</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="String.html" title="String (class)">String</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the VDU ID from the VNFD</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>vnfc_id</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="String.html" title="String (class)">String</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the VNFC ID from the VNFD</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>vnfcs</span>
      
      
        <span class='type'>(<tt>Array</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the list of VNFCS for the VDU</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>networks_id</span>
      
      
        <span class='type'>(<tt>Array</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the IDs of the networks created by NS Manager</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>security_group_id</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="String.html" title="String (class)">String</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the ID of the T-NOVA security group</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Array</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>a list of ports</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


330
331
332
333
334
335
336
337
338
339
340
341
342
343
344
345
346
347
348
349
350
351
352
353
354
355
356
357
358
359
360
361
362
363
364
365
366
367
368
369
370
371
372
373
374
375
376</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'hot-generator/models/vnfd_to_hot.rb', line 330</span>

<span class='kw'>def</span> <span class='id identifier rubyid_create_ports'>create_ports</span><span class='lparen'>(</span><span class='id identifier rubyid_vdu_id'>vdu_id</span><span class='comma'>,</span> <span class='id identifier rubyid_connection_points'>connection_points</span><span class='comma'>,</span> <span class='id identifier rubyid_vlinks'>vlinks</span><span class='comma'>,</span> <span class='id identifier rubyid_networks_id'>networks_id</span><span class='comma'>,</span> <span class='id identifier rubyid_security_group_id'>security_group_id</span><span class='comma'>,</span> <span class='id identifier rubyid_router_interfaces'>router_interfaces</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_ports'>ports</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>

  <span class='id identifier rubyid_connection_points'>connection_points</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_connection_point'>connection_point</span><span class='op'>|</span>
    <span class='id identifier rubyid_vlink'>vlink</span> <span class='op'>=</span> <span class='id identifier rubyid_vlinks'>vlinks</span><span class='period'>.</span><span class='id identifier rubyid_find'>find</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_vlink'>vlink</span><span class='op'>|</span> <span class='id identifier rubyid_vlink'>vlink</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>id</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='id identifier rubyid_connection_point'>connection_point</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>vlink_ref</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='rbrace'>}</span>
    <span class='comment'>#detect, and return error if not.
</span>    <span class='id identifier rubyid_network'>network</span> <span class='op'>=</span> <span class='id identifier rubyid_networks_id'>networks_id</span><span class='period'>.</span><span class='id identifier rubyid_detect'>detect</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_network'>network</span><span class='op'>|</span> <span class='id identifier rubyid_network'>network</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>alias</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='id identifier rubyid_vlink'>vlink</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>alias</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='rbrace'>}</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_network'>network</span> <span class='op'>!=</span> <span class='kw'>nil</span>
      <span class='id identifier rubyid_port_name'>port_name</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_connection_point'>connection_point</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>id</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
      <span class='id identifier rubyid_ports'>ports</span> <span class='op'>&lt;&lt;</span> <span class='lbrace'>{</span><span class='label'>port:</span> <span class='lbrace'>{</span><span class='label'>get_resource:</span> <span class='id identifier rubyid_port_name'>port_name</span><span class='rbrace'>}</span><span class='rbrace'>}</span>
      <span class='kw'>if</span> <span class='id identifier rubyid_vlink'>vlink</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>existing_net_id</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
        <span class='kw'>if</span> <span class='id identifier rubyid_vlink'>vlink</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>port_security_enabled</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
          <span class='ivar'>@hot</span><span class='period'>.</span><span class='id identifier rubyid_resources_list'>resources_list</span> <span class='op'>&lt;&lt;</span> <span class='const'>Port</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_port_name'>port_name</span><span class='comma'>,</span> <span class='id identifier rubyid_network'>network</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>heat_id</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='id identifier rubyid_security_group_id'>security_group_id</span><span class='rparen'>)</span>
        <span class='kw'>else</span>
          <span class='ivar'>@hot</span><span class='period'>.</span><span class='id identifier rubyid_resources_list'>resources_list</span> <span class='op'>&lt;&lt;</span> <span class='const'>Port</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_port_name'>port_name</span><span class='comma'>,</span> <span class='id identifier rubyid_network'>network</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>heat_id</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='rparen'>)</span>
        <span class='kw'>end</span>
      <span class='kw'>else</span>
        <span class='kw'>if</span> <span class='id identifier rubyid_vlink'>vlink</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>port_security_enabled</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
          <span class='ivar'>@hot</span><span class='period'>.</span><span class='id identifier rubyid_resources_list'>resources_list</span> <span class='op'>&lt;&lt;</span> <span class='const'>Port</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_port_name'>port_name</span><span class='comma'>,</span> <span class='lbrace'>{</span><span class='label'>get_resource:</span> <span class='id identifier rubyid_network'>network</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>heat</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='rbrace'>}</span><span class='comma'>,</span> <span class='id identifier rubyid_security_group_id'>security_group_id</span><span class='rparen'>)</span>
        <span class='kw'>else</span>
          <span class='ivar'>@hot</span><span class='period'>.</span><span class='id identifier rubyid_resources_list'>resources_list</span> <span class='op'>&lt;&lt;</span> <span class='const'>Port</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_port_name'>port_name</span><span class='comma'>,</span> <span class='lbrace'>{</span><span class='label'>get_resource:</span> <span class='id identifier rubyid_network'>network</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>heat</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='rbrace'>}</span><span class='rparen'>)</span>
        <span class='kw'>end</span>
      <span class='kw'>end</span>

      <span class='comment'># Check if it&#39;s necessary to create an output for this resource
</span>      <span class='kw'>if</span> <span class='ivar'>@outputs</span><span class='period'>.</span><span class='id identifier rubyid_has_key?'>has_key?</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>ip</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span> <span class='ivar'>@outputs</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>ip</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_port_name'>port_name</span><span class='rparen'>)</span>
        <span class='ivar'>@hot</span><span class='period'>.</span><span class='id identifier rubyid_outputs_list'>outputs_list</span> <span class='op'>&lt;&lt;</span> <span class='const'>Output</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_port_name'>port_name</span><span class='embexpr_end'>}</span><span class='tstring_content'>#ip</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_port_name'>port_name</span><span class='embexpr_end'>}</span><span class='tstring_content'> IP address</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='lbrace'>{</span><span class='label'>get_attr:</span> <span class='lbracket'>[</span><span class='id identifier rubyid_port_name'>port_name</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>fixed_ips</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>ip_address</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='rbrace'>}</span><span class='rparen'>)</span>
      <span class='kw'>end</span>

      <span class='comment'># Check if the port has a Floating IP
</span>      <span class='kw'>if</span> <span class='id identifier rubyid_vlink'>vlink</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>access</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
        <span class='id identifier rubyid_floating_ip_name'>floating_ip_name</span> <span class='op'>=</span> <span class='id identifier rubyid_get_resource_name'>get_resource_name</span>
        <span class='comment'># TODO: Receive the floating ip pool name?
</span>        <span class='ivar'>@hot</span><span class='period'>.</span><span class='id identifier rubyid_resources_list'>resources_list</span> <span class='op'>&lt;&lt;</span> <span class='const'>FloatingIp</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_floating_ip_name'>floating_ip_name</span><span class='comma'>,</span> <span class='ivar'>@public_network_id</span><span class='rparen'>)</span>
        <span class='ivar'>@hot</span><span class='period'>.</span><span class='id identifier rubyid_resources_list'>resources_list</span> <span class='op'>&lt;&lt;</span> <span class='const'>FloatingIpAssociation</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_get_resource_name'>get_resource_name</span><span class='comma'>,</span> <span class='lbrace'>{</span><span class='label'>get_resource:</span> <span class='id identifier rubyid_floating_ip_name'>floating_ip_name</span><span class='rbrace'>}</span><span class='comma'>,</span> <span class='lbrace'>{</span><span class='label'>get_resource:</span> <span class='id identifier rubyid_port_name'>port_name</span><span class='rbrace'>}</span><span class='comma'>,</span> <span class='id identifier rubyid_router_interfaces'>router_interfaces</span><span class='rparen'>)</span>
        <span class='comment'>#          @hot.outputs_list &lt;&lt; Output.new(&quot;#{port_name}#floating_ip&quot;, &quot;#{port_name} Floating IP&quot;, {get_attr: [floating_ip_name, &#39;floating_ip_address&#39;]})
</span>        <span class='ivar'>@hot</span><span class='period'>.</span><span class='id identifier rubyid_outputs_list'>outputs_list</span> <span class='op'>&lt;&lt;</span> <span class='const'>Output</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_vdu_id'>vdu_id</span><span class='embexpr_end'>}</span><span class='tstring_content'>#</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_connection_point'>connection_point</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>id</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>#PublicIp</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_port_name'>port_name</span><span class='embexpr_end'>}</span><span class='tstring_content'> Floating IP</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='lbrace'>{</span><span class='label'>get_attr:</span> <span class='lbracket'>[</span><span class='id identifier rubyid_floating_ip_name'>floating_ip_name</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>floating_ip_address</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='rbrace'>}</span><span class='rparen'>)</span>
        <span class='ivar'>@hot</span><span class='period'>.</span><span class='id identifier rubyid_outputs_list'>outputs_list</span> <span class='op'>&lt;&lt;</span> <span class='const'>Output</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_vdu_id'>vdu_id</span><span class='embexpr_end'>}</span><span class='tstring_content'>#</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_connection_point'>connection_point</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>id</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>#fixed_ips#0#ip_address</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_port_name'>port_name</span><span class='embexpr_end'>}</span><span class='tstring_content'> private address</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='lbrace'>{</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>get_attr</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='lbracket'>[</span><span class='id identifier rubyid_port_name'>port_name</span><span class='comma'>,</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>fixed_ips</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span><span class='int'>0</span><span class='comma'>,</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>ip_address</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='rbrace'>}</span><span class='rparen'>)</span>
      <span class='kw'>else</span>
        <span class='ivar'>@hot</span><span class='period'>.</span><span class='id identifier rubyid_outputs_list'>outputs_list</span> <span class='op'>&lt;&lt;</span> <span class='const'>Output</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_vdu_id'>vdu_id</span><span class='embexpr_end'>}</span><span class='tstring_content'>#</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_connection_point'>connection_point</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>id</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>#fixed_ips#0#ip_address</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_port_name'>port_name</span><span class='embexpr_end'>}</span><span class='tstring_content'> private address</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='lbrace'>{</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>get_attr</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='lbracket'>[</span><span class='id identifier rubyid_port_name'>port_name</span><span class='comma'>,</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>fixed_ips</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span><span class='int'>0</span><span class='comma'>,</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>ip_address</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='rbrace'>}</span><span class='rparen'>)</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>

  <span class='kw'>end</span>

  <span class='id identifier rubyid_ports'>ports</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="create_router_interface-instance_method">
  
    #<strong>create_router_interface</strong>(router_id, subnet_name, port_name)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


240
241
242
243
244</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'hot-generator/models/vnfd_to_hot.rb', line 240</span>

<span class='kw'>def</span> <span class='id identifier rubyid_create_router_interface'>create_router_interface</span><span class='lparen'>(</span><span class='id identifier rubyid_router_id'>router_id</span><span class='comma'>,</span> <span class='id identifier rubyid_subnet_name'>subnet_name</span><span class='comma'>,</span> <span class='id identifier rubyid_port_name'>port_name</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_name'>name</span> <span class='op'>=</span> <span class='id identifier rubyid_get_resource_name'>get_resource_name</span>
  <span class='ivar'>@hot</span><span class='period'>.</span><span class='id identifier rubyid_resources_list'>resources_list</span> <span class='op'>&lt;&lt;</span> <span class='const'>RouterInterface</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_router_id'>router_id</span><span class='comma'>,</span> <span class='lbrace'>{</span><span class='label'>get_resource:</span> <span class='id identifier rubyid_subnet_name'>subnet_name</span><span class='rbrace'>}</span><span class='comma'>,</span> <span class='lbrace'>{</span><span class='label'>get_resource:</span> <span class='id identifier rubyid_port_name'>port_name</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_name'>name</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="create_scale_policy-instance_method">
  
    #<strong>create_scale_policy</strong>(auto_scaling_group, scaling_adjustment)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


553
554
555
556
557</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'hot-generator/models/vnfd_to_hot.rb', line 553</span>

<span class='kw'>def</span> <span class='id identifier rubyid_create_scale_policy'>create_scale_policy</span><span class='lparen'>(</span><span class='id identifier rubyid_auto_scaling_group'>auto_scaling_group</span><span class='comma'>,</span> <span class='id identifier rubyid_scaling_adjustment'>scaling_adjustment</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_name'>name</span> <span class='op'>=</span> <span class='id identifier rubyid_get_resource_name'>get_resource_name</span>
  <span class='ivar'>@hot</span><span class='period'>.</span><span class='id identifier rubyid_resources_list'>resources_list</span> <span class='op'>&lt;&lt;</span> <span class='const'>ScalingPolicy</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='lbrace'>{</span><span class='label'>get_resource:</span> <span class='id identifier rubyid_auto_scaling_group'>auto_scaling_group</span><span class='rbrace'>}</span><span class='comma'>,</span> <span class='id identifier rubyid_scaling_adjustment'>scaling_adjustment</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_name'>name</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="create_server-instance_method">
  
    #<strong>create_server</strong>(vdu, image, flavour_name, ports, key_name, scale)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Creates an HEAT server resource from the VNFD</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>vdu</span>
      
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the VDU from the VNFD</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>image_name</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="String.html" title="String (class)">String</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the image resource name</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>flavour_name</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="String.html" title="String (class)">String</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the flavour resource name</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>ports</span>
      
      
        <span class='type'>(<tt>Array</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>list of the ports resource</p>
</div>
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


399
400
401
402
403
404
405
406
407
408
409
410
411
412
413
414
415
416
417
418
419
420</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'hot-generator/models/vnfd_to_hot.rb', line 399</span>

<span class='kw'>def</span> <span class='id identifier rubyid_create_server'>create_server</span><span class='lparen'>(</span><span class='id identifier rubyid_vdu'>vdu</span><span class='comma'>,</span> <span class='id identifier rubyid_image'>image</span><span class='comma'>,</span> <span class='id identifier rubyid_flavour_name'>flavour_name</span><span class='comma'>,</span> <span class='id identifier rubyid_ports'>ports</span><span class='comma'>,</span> <span class='id identifier rubyid_key_name'>key_name</span><span class='comma'>,</span> <span class='id identifier rubyid_scale'>scale</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_scale'>scale</span>
    <span class='id identifier rubyid_server'>server</span> <span class='op'>=</span> <span class='const'>Server</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span>
        <span class='id identifier rubyid_vdu'>vdu</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>id</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='comma'>,</span>
        <span class='lbrace'>{</span><span class='label'>get_resource:</span> <span class='id identifier rubyid_flavour_name'>flavour_name</span><span class='rbrace'>}</span><span class='comma'>,</span>
        <span class='id identifier rubyid_image'>image</span><span class='comma'>,</span>
        <span class='id identifier rubyid_ports'>ports</span><span class='comma'>,</span>
        <span class='id identifier rubyid_add_wait_condition'>add_wait_condition</span><span class='lparen'>(</span><span class='id identifier rubyid_vdu'>vdu</span><span class='rparen'>)</span><span class='comma'>,</span>
        <span class='lbrace'>{</span><span class='label'>get_resource:</span> <span class='id identifier rubyid_key_name'>key_name</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='kw'>else</span>
    <span class='ivar'>@hot</span><span class='period'>.</span><span class='id identifier rubyid_resources_list'>resources_list</span> <span class='op'>&lt;&lt;</span> <span class='const'>Server</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span>
        <span class='id identifier rubyid_vdu'>vdu</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>id</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='comma'>,</span>
        <span class='lbrace'>{</span><span class='label'>get_resource:</span> <span class='id identifier rubyid_flavour_name'>flavour_name</span><span class='rbrace'>}</span><span class='comma'>,</span>
        <span class='id identifier rubyid_image'>image</span><span class='comma'>,</span>
        <span class='id identifier rubyid_ports'>ports</span><span class='comma'>,</span>
        <span class='id identifier rubyid_add_wait_condition'>add_wait_condition</span><span class='lparen'>(</span><span class='id identifier rubyid_vdu'>vdu</span><span class='rparen'>)</span><span class='comma'>,</span>
        <span class='lbrace'>{</span><span class='label'>get_resource:</span> <span class='id identifier rubyid_key_name'>key_name</span><span class='rbrace'>}</span><span class='rparen'>)</span>
    <span class='ivar'>@hot</span><span class='period'>.</span><span class='id identifier rubyid_outputs_list'>outputs_list</span> <span class='op'>&lt;&lt;</span> <span class='const'>Output</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_vdu'>vdu</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>id</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>#id</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_vdu'>vdu</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>id</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'> ID</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='lbrace'>{</span><span class='label'>get_resource:</span> <span class='id identifier rubyid_vdu'>vdu</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>id</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_server'>server</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="create_subnet-instance_method">
  
    #<strong>create_subnet</strong>(network_name, dns_server, cidr)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


234
235
236
237
238</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'hot-generator/models/vnfd_to_hot.rb', line 234</span>

<span class='kw'>def</span> <span class='id identifier rubyid_create_subnet'>create_subnet</span><span class='lparen'>(</span><span class='id identifier rubyid_network_name'>network_name</span><span class='comma'>,</span> <span class='id identifier rubyid_dns_server'>dns_server</span><span class='comma'>,</span> <span class='id identifier rubyid_cidr'>cidr</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_name'>name</span> <span class='op'>=</span> <span class='id identifier rubyid_get_resource_name'>get_resource_name</span>
  <span class='ivar'>@hot</span><span class='period'>.</span><span class='id identifier rubyid_resources_list'>resources_list</span> <span class='op'>&lt;&lt;</span> <span class='const'>Subnet</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='lbrace'>{</span><span class='label'>get_resource:</span> <span class='id identifier rubyid_network_name'>network_name</span><span class='rbrace'>}</span><span class='comma'>,</span> <span class='id identifier rubyid_dns_server'>dns_server</span><span class='comma'>,</span> <span class='id identifier rubyid_cidr'>cidr</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_name'>name</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="generate_nested_template-instance_method">
  
    #<strong>generate_nested_template</strong>(vdu, vnfd, networks_id, security_group_id, nets, router_interfaces, router_id)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'hot-generator/models/vnfd_to_hot.rb', line 129</span>

<span class='kw'>def</span> <span class='id identifier rubyid_generate_nested_template'>generate_nested_template</span><span class='lparen'>(</span><span class='id identifier rubyid_vdu'>vdu</span><span class='comma'>,</span> <span class='id identifier rubyid_vnfd'>vnfd</span><span class='comma'>,</span> <span class='id identifier rubyid_networks_id'>networks_id</span><span class='comma'>,</span> <span class='id identifier rubyid_security_group_id'>security_group_id</span><span class='comma'>,</span> <span class='id identifier rubyid_nets'>nets</span><span class='comma'>,</span> <span class='id identifier rubyid_router_interfaces'>router_interfaces</span><span class='comma'>,</span> <span class='id identifier rubyid_router_id'>router_id</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_hot'>hot</span> <span class='op'>=</span> <span class='const'>Hot</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>server</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='id identifier rubyid_hot'>hot</span><span class='period'>.</span><span class='id identifier rubyid_parameters_list'>parameters_list</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_outputs_list'>outputs_list</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
  <span class='id identifier rubyid_hot'>hot</span><span class='period'>.</span><span class='id identifier rubyid_parameters_list'>parameters_list</span> <span class='op'>&lt;&lt;</span> <span class='const'>Parameter</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>image</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>string</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
  <span class='id identifier rubyid_hot'>hot</span><span class='period'>.</span><span class='id identifier rubyid_parameters_list'>parameters_list</span> <span class='op'>&lt;&lt;</span> <span class='const'>Parameter</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>flavor</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>string</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
  <span class='comment'>#for each network, create a parameter
</span>  <span class='id identifier rubyid_networks_id'>networks_id</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_net'>net</span><span class='op'>|</span>
    <span class='id identifier rubyid_hot'>hot</span><span class='period'>.</span><span class='id identifier rubyid_parameters_list'>parameters_list</span> <span class='op'>&lt;&lt;</span> <span class='const'>Parameter</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_net'>net</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>heat</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>string</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_router_interfaces'>router_interfaces</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_iface'>iface</span><span class='op'>|</span>
    <span class='id identifier rubyid_hot'>hot</span><span class='period'>.</span><span class='id identifier rubyid_parameters_list'>parameters_list</span> <span class='op'>&lt;&lt;</span> <span class='const'>Parameter</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_iface'>iface</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>string</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_arr'>arr</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_router_interfaces'>router_interfaces</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_iface'>iface</span><span class='op'>|</span>
    <span class='id identifier rubyid_arr'>arr</span> <span class='op'>&lt;&lt;</span> <span class='lbrace'>{</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>get_param</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_iface'>iface</span><span class='rbrace'>}</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_ports'>ports</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_connection_points'>connection_points</span> <span class='op'>=</span> <span class='id identifier rubyid_vdu'>vdu</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>connection_points</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_vlinks'>vlinks</span> <span class='op'>=</span> <span class='id identifier rubyid_vnfd'>vnfd</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>vlinks</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_vdu_id'>vdu_id</span> <span class='op'>=</span> <span class='id identifier rubyid_vdu'>vdu</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>id</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_auto_scale_name'>auto_scale_name</span> <span class='op'>=</span> <span class='id identifier rubyid_get_resource_name'>get_resource_name</span>
  <span class='id identifier rubyid_connection_points'>connection_points</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_connection_point'>connection_point</span><span class='op'>|</span>
    <span class='id identifier rubyid_vlink'>vlink</span> <span class='op'>=</span> <span class='id identifier rubyid_vlinks'>vlinks</span><span class='period'>.</span><span class='id identifier rubyid_find'>find</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_vlink'>vlink</span><span class='op'>|</span> <span class='id identifier rubyid_vlink'>vlink</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>id</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='id identifier rubyid_connection_point'>connection_point</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>vlink_ref</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='rbrace'>}</span>
    <span class='comment'>#detect, and return error if not.
</span>    <span class='id identifier rubyid_network'>network</span> <span class='op'>=</span> <span class='id identifier rubyid_networks_id'>networks_id</span><span class='period'>.</span><span class='id identifier rubyid_detect'>detect</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_network'>network</span><span class='op'>|</span> <span class='id identifier rubyid_network'>network</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>alias</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='id identifier rubyid_vlink'>vlink</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>alias</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='rbrace'>}</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_network'>network</span> <span class='op'>!=</span> <span class='kw'>nil</span>
      <span class='id identifier rubyid_port_name'>port_name</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_connection_point'>connection_point</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>id</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
      <span class='id identifier rubyid_ports'>ports</span> <span class='op'>&lt;&lt;</span> <span class='lbrace'>{</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>port</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='lbrace'>{</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>get_resource</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_port_name'>port_name</span><span class='rbrace'>}</span><span class='rbrace'>}</span>
      <span class='kw'>if</span> <span class='id identifier rubyid_vlink'>vlink</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>existing_net_id</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
        <span class='kw'>if</span> <span class='id identifier rubyid_vlink'>vlink</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>port_security_enabled</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
          <span class='id identifier rubyid_hot'>hot</span><span class='period'>.</span><span class='id identifier rubyid_resources_list'>resources_list</span> <span class='op'>&lt;&lt;</span> <span class='const'>Port</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_port_name'>port_name</span><span class='comma'>,</span> <span class='id identifier rubyid_network'>network</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>heat_id</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='id identifier rubyid_security_group_id'>security_group_id</span><span class='rparen'>)</span>
        <span class='kw'>else</span>
          <span class='id identifier rubyid_hot'>hot</span><span class='period'>.</span><span class='id identifier rubyid_resources_list'>resources_list</span> <span class='op'>&lt;&lt;</span> <span class='const'>Port</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_port_name'>port_name</span><span class='comma'>,</span> <span class='id identifier rubyid_network'>network</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>heat_id</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='rparen'>)</span>
        <span class='kw'>end</span>
      <span class='kw'>else</span>
        <span class='kw'>if</span> <span class='id identifier rubyid_vlink'>vlink</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>port_security_enabled</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
          <span class='id identifier rubyid_hot'>hot</span><span class='period'>.</span><span class='id identifier rubyid_resources_list'>resources_list</span> <span class='op'>&lt;&lt;</span> <span class='const'>Port</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_port_name'>port_name</span><span class='comma'>,</span> <span class='lbrace'>{</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>get_param</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_network'>network</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>heat</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='rbrace'>}</span><span class='comma'>,</span> <span class='id identifier rubyid_security_group_id'>security_group_id</span><span class='rparen'>)</span>
        <span class='kw'>else</span>
          <span class='id identifier rubyid_hot'>hot</span><span class='period'>.</span><span class='id identifier rubyid_resources_list'>resources_list</span> <span class='op'>&lt;&lt;</span> <span class='const'>Port</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_port_name'>port_name</span><span class='comma'>,</span> <span class='lbrace'>{</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>get_param</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_network'>network</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>heat</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='rbrace'>}</span><span class='rparen'>)</span>
        <span class='kw'>end</span>
      <span class='kw'>end</span>
      <span class='comment'>#router_interface_name = get_resource_name_nested(hot)
</span>      <span class='comment'>#hot.resources_list &lt;&lt; RouterInterface.new(router_interface_name, router_id, nil, {&quot;get_resource&quot; =&gt; port_name})
</span>
      <span class='comment'># Check if it&#39;s necessary to create an output for this resource
</span>      <span class='kw'>if</span> <span class='id identifier rubyid_outputs_list'>outputs_list</span><span class='period'>.</span><span class='id identifier rubyid_has_key?'>has_key?</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>ip</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_outputs_list'>outputs_list</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>ip</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_port_name'>port_name</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_hot'>hot</span><span class='period'>.</span><span class='id identifier rubyid_outputs_list'>outputs_list</span> <span class='op'>&lt;&lt;</span> <span class='const'>Output</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_port_name'>port_name</span><span class='embexpr_end'>}</span><span class='tstring_content'>#ip</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_port_name'>port_name</span><span class='embexpr_end'>}</span><span class='tstring_content'> IP address</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='lbrace'>{</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>get_attr</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='lbracket'>[</span><span class='id identifier rubyid_port_name'>port_name</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>fixed_ips</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>ip_address</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='rbrace'>}</span><span class='rparen'>)</span>
      <span class='kw'>end</span>

      <span class='comment'># Check if the port has a Floating IP
</span>      <span class='kw'>if</span> <span class='id identifier rubyid_vlink'>vlink</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>access</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
        <span class='id identifier rubyid_floating_ip_name'>floating_ip_name</span> <span class='op'>=</span> <span class='id identifier rubyid_get_resource_name_nested'>get_resource_name_nested</span><span class='lparen'>(</span><span class='id identifier rubyid_hot'>hot</span><span class='rparen'>)</span>
        <span class='comment'># TODO: Receive the floating ip pool name?
</span>        <span class='id identifier rubyid_hot'>hot</span><span class='period'>.</span><span class='id identifier rubyid_resources_list'>resources_list</span> <span class='op'>&lt;&lt;</span> <span class='const'>FloatingIp</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_floating_ip_name'>floating_ip_name</span><span class='comma'>,</span> <span class='ivar'>@public_network_id</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_hot'>hot</span><span class='period'>.</span><span class='id identifier rubyid_resources_list'>resources_list</span> <span class='op'>&lt;&lt;</span> <span class='const'>FloatingIpAssociation</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_get_resource_name_nested'>get_resource_name_nested</span><span class='lparen'>(</span><span class='id identifier rubyid_hot'>hot</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='lbrace'>{</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>get_resource</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_floating_ip_name'>floating_ip_name</span><span class='rbrace'>}</span><span class='comma'>,</span> <span class='lbrace'>{</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>get_resource</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_port_name'>port_name</span><span class='rbrace'>}</span><span class='comma'>,</span> <span class='lbracket'>[</span><span class='rbracket'>]</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_hot'>hot</span><span class='period'>.</span><span class='id identifier rubyid_outputs_list'>outputs_list</span> <span class='op'>&lt;&lt;</span> <span class='const'>Output</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_vdu_id'>vdu_id</span><span class='embexpr_end'>}</span><span class='tstring_content'>#</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_connection_point'>connection_point</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>id</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>#PublicIp</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_port_name'>port_name</span><span class='embexpr_end'>}</span><span class='tstring_content'> Floating IP</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='lbrace'>{</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>get_attr</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='lbracket'>[</span><span class='id identifier rubyid_floating_ip_name'>floating_ip_name</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>floating_ip_address</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='rbrace'>}</span><span class='rparen'>)</span>
        <span class='ivar'>@hot</span><span class='period'>.</span><span class='id identifier rubyid_outputs_list'>outputs_list</span> <span class='op'>&lt;&lt;</span> <span class='const'>Output</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_vdu_id'>vdu_id</span><span class='embexpr_end'>}</span><span class='tstring_content'>#</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_connection_point'>connection_point</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>id</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>#PublicIp</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_port_name'>port_name</span><span class='embexpr_end'>}</span><span class='tstring_content'> Nested outputs_list</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='lbrace'>{</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>get_attr</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='lbracket'>[</span><span class='id identifier rubyid_auto_scale_name'>auto_scale_name</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>outputs_list</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_vdu_id'>vdu_id</span><span class='embexpr_end'>}</span><span class='tstring_content'>#</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_connection_point'>connection_point</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>id</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>#PublicIp</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='rbrace'>}</span><span class='rparen'>)</span>
      <span class='kw'>else</span>
        <span class='id identifier rubyid_hot'>hot</span><span class='period'>.</span><span class='id identifier rubyid_outputs_list'>outputs_list</span> <span class='op'>&lt;&lt;</span> <span class='const'>Output</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_vdu_id'>vdu_id</span><span class='embexpr_end'>}</span><span class='tstring_content'>#</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_connection_point'>connection_point</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>id</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>#PrivateIp</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_port_name'>port_name</span><span class='embexpr_end'>}</span><span class='tstring_content'> Private IP</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='lbrace'>{</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>get_attr</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='lbracket'>[</span><span class='id identifier rubyid_port_name'>port_name</span><span class='comma'>,</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>fixed_ips</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span><span class='int'>0</span><span class='comma'>,</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>ip_address</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='rbrace'>}</span><span class='rparen'>)</span>
        <span class='ivar'>@hot</span><span class='period'>.</span><span class='id identifier rubyid_outputs_list'>outputs_list</span> <span class='op'>&lt;&lt;</span> <span class='const'>Output</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_vdu_id'>vdu_id</span><span class='embexpr_end'>}</span><span class='tstring_content'>#</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_connection_point'>connection_point</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>id</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>#fixed_ips#0#ip_address</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_port_name'>port_name</span><span class='embexpr_end'>}</span><span class='tstring_content'> Nested outputs_list</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='lbrace'>{</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>get_attr</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='lbracket'>[</span><span class='id identifier rubyid_auto_scale_name'>auto_scale_name</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>outputs_list</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_vdu_id'>vdu_id</span><span class='embexpr_end'>}</span><span class='tstring_content'>#</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_connection_point'>connection_point</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>id</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>#PrivateIp</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='rbrace'>}</span><span class='rparen'>)</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>

  <span class='kw'>end</span>

  <span class='id identifier rubyid_hot'>hot</span><span class='period'>.</span><span class='id identifier rubyid_resources_list'>resources_list</span> <span class='op'>&lt;&lt;</span> <span class='const'>Server</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span>
      <span class='id identifier rubyid_vdu'>vdu</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>id</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='comma'>,</span>
      <span class='lbrace'>{</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>get_param</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>flavor</span><span class='tstring_end'>&#39;</span></span><span class='rbrace'>}</span><span class='comma'>,</span>
      <span class='lbrace'>{</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>get_param</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>image</span><span class='tstring_end'>&#39;</span></span><span class='rbrace'>}</span><span class='comma'>,</span>
      <span class='id identifier rubyid_ports'>ports</span><span class='comma'>,</span>
      <span class='id identifier rubyid_add_wait_condition2'>add_wait_condition2</span><span class='lparen'>(</span><span class='id identifier rubyid_vdu'>vdu</span><span class='comma'>,</span> <span class='id identifier rubyid_hot'>hot</span><span class='rparen'>)</span><span class='comma'>,</span>
      <span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_hot'>hot</span><span class='period'>.</span><span class='id identifier rubyid_outputs_list'>outputs_list</span> <span class='op'>&lt;&lt;</span> <span class='const'>Output</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_vdu'>vdu</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>id</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>#id</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_vdu'>vdu</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>id</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'> ID</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='lbrace'>{</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>get_resource</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_vdu'>vdu</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>id</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='ivar'>@hot</span><span class='period'>.</span><span class='id identifier rubyid_outputs_list'>outputs_list</span> <span class='op'>&lt;&lt;</span> <span class='const'>Output</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_vdu'>vdu</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>id</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>#vdus</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_vdu'>vdu</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>id</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'> ID</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='lbrace'>{</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>get_attr</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='lbracket'>[</span><span class='id identifier rubyid_auto_scale_name'>auto_scale_name</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>outputs_list</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_vdu'>vdu</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>id</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>#id</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_hot'>hot</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_resource_name-instance_method">
  
    #<strong>get_resource_name</strong>  &#x21d2; <tt><span class='object_link'><a href="String.html" title="String (class)">String</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Generates a new resource name</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="String.html" title="String (class)">String</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the generated resource name</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


510
511
512</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'hot-generator/models/vnfd_to_hot.rb', line 510</span>

<span class='kw'>def</span> <span class='id identifier rubyid_get_resource_name'>get_resource_name</span>
  <span class='ivar'>@name</span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>_</span><span class='tstring_end'>&#39;</span></span> <span class='op'>+</span> <span class='ivar'>@hot</span><span class='period'>.</span><span class='id identifier rubyid_resources_list'>resources_list</span><span class='period'>.</span><span class='id identifier rubyid_length'>length</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span> <span class='kw'>unless</span> <span class='ivar'>@name</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_resource_name_nested-instance_method">
  
    #<strong>get_resource_name_nested</strong>(hot)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


514
515
516</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'hot-generator/models/vnfd_to_hot.rb', line 514</span>

<span class='kw'>def</span> <span class='id identifier rubyid_get_resource_name_nested'>get_resource_name_nested</span><span class='lparen'>(</span><span class='id identifier rubyid_hot'>hot</span><span class='rparen'>)</span>
  <span class='ivar'>@name</span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>_nested_</span><span class='tstring_end'>&#39;</span></span> <span class='op'>+</span> <span class='id identifier rubyid_hot'>hot</span><span class='period'>.</span><span class='id identifier rubyid_resources_list'>resources_list</span><span class='period'>.</span><span class='id identifier rubyid_length'>length</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span> <span class='kw'>unless</span> <span class='ivar'>@name</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="parse_outputs-instance_method">
  
    #<strong>parse_outputs</strong>(events)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Parse the outputs from the VNFD and builds an outputs hash</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>events</span>
      
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the VNF lifecycle events</p>
</div>
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


249
250
251
252
253
254
255
256
257
258
259
260
261
262
263
264
265
266
267
268
269
270
271
272
273
274
275
276
277
278
279
280
281
282
283
284
285
286
287
288
289
290
291
292
293
294</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'hot-generator/models/vnfd_to_hot.rb', line 249</span>

<span class='kw'>def</span> <span class='id identifier rubyid_parse_outputs'>parse_outputs</span><span class='lparen'>(</span><span class='id identifier rubyid_events'>events</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_outputs'>outputs</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>

  <span class='id identifier rubyid_events'>events</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_event'>event</span><span class='comma'>,</span> <span class='id identifier rubyid_event_info'>event_info</span><span class='op'>|</span>
    <span class='kw'>unless</span> <span class='id identifier rubyid_event_info'>event_info</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span> <span class='op'>||</span> <span class='id identifier rubyid_event_info'>event_info</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>template_file</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
      <span class='id identifier rubyid_raise'>raise</span> <span class='const'>CustomException</span><span class='op'>::</span><span class='const'>InvalidTemplateFileFormat</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Template file format not supported</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>unless</span> <span class='id identifier rubyid_event_info'>event_info</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>template_file_format</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_downcase'>downcase</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>json</span><span class='tstring_end'>&#39;</span></span>
      <span class='const'>JSON</span><span class='period'>.</span><span class='id identifier rubyid_parse'>parse</span><span class='lparen'>(</span><span class='id identifier rubyid_event_info'>event_info</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>template_file</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_id'>id</span><span class='comma'>,</span> <span class='id identifier rubyid_output'>output</span><span class='op'>|</span>
        <span class='kw'>unless</span> <span class='id identifier rubyid_outputs'>outputs</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_output'>output</span><span class='rparen'>)</span>
          <span class='id identifier rubyid_outputs'>outputs</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_output'>output</span>

          <span class='id identifier rubyid_match'>match</span> <span class='op'>=</span> <span class='id identifier rubyid_output'>output</span><span class='period'>.</span><span class='id identifier rubyid_delete'>delete</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'> </span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_match'>match</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^get_attr\[(.*)\]$</span><span class='regexp_end'>/i</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_a'>to_a</span>
          <span class='kw'>if</span> <span class='id identifier rubyid_match'>match</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span> <span class='op'>==</span> <span class='int'>0</span>
            <span class='id identifier rubyid_puts'>puts</span> <span class='id identifier rubyid_output'>output</span>
            <span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>The match is null.</span><span class='tstring_end'>&quot;</span></span>
          <span class='kw'>else</span>
            <span class='id identifier rubyid_string'>string</span> <span class='op'>=</span> <span class='id identifier rubyid_match'>match</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_split'>split</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>,</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='symbol'>:strip</span><span class='rparen'>)</span>
            <span class='kw'>if</span> <span class='id identifier rubyid_string'>string</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span> <span class='op'>==</span> <span class='int'>0</span>
              <span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Error getting the &#39;get_attr&#39; of </span><span class='tstring_end'>&quot;</span></span> <span class='op'>+</span> <span class='id identifier rubyid_match'>match</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span>
            <span class='kw'>else</span>
              <span class='id identifier rubyid_get_attr'>get_attr</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='label'>get_attr:</span> <span class='lbracket'>[</span><span class='rbracket'>]</span><span class='rbrace'>}</span>
              <span class='id identifier rubyid_string'>string</span><span class='period'>.</span><span class='id identifier rubyid_each_with_index'>each_with_index</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_type'>type</span><span class='comma'>,</span> <span class='id identifier rubyid_i'>i</span><span class='op'>|</span>
                <span class='kw'>if</span> <span class='const'>CommonMethods</span><span class='period'>.</span><span class='id identifier rubyid_is_num?'>is_num?</span><span class='lparen'>(</span><span class='id identifier rubyid_type'>type</span><span class='rparen'>)</span>
                  <span class='id identifier rubyid_get_attr'>get_attr</span><span class='lbracket'>[</span><span class='symbol'>:get_attr</span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_type'>type</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span>
                <span class='kw'>else</span>
                  <span class='id identifier rubyid_get_attr'>get_attr</span><span class='lbracket'>[</span><span class='symbol'>:get_attr</span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_type'>type</span>
                <span class='kw'>end</span>
              <span class='kw'>end</span>

              <span class='kw'>if</span> <span class='ivar'>@outputs</span><span class='period'>.</span><span class='id identifier rubyid_has_key?'>has_key?</span><span class='lparen'>(</span><span class='id identifier rubyid_match'>match</span><span class='lbracket'>[</span><span class='int'>2</span><span class='rbracket'>]</span><span class='rparen'>)</span>
                <span class='ivar'>@outputs</span><span class='lbracket'>[</span><span class='id identifier rubyid_match'>match</span><span class='lbracket'>[</span><span class='int'>2</span><span class='rbracket'>]</span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_match'>match</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span>
              <span class='kw'>else</span>
                <span class='ivar'>@outputs</span><span class='lbracket'>[</span><span class='id identifier rubyid_match'>match</span><span class='lbracket'>[</span><span class='int'>2</span><span class='rbracket'>]</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='id identifier rubyid_match'>match</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='rbracket'>]</span>
              <span class='kw'>end</span>
              <span class='kw'>if</span> <span class='id identifier rubyid_string'>string</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>fixed_ips</span><span class='tstring_end'>&#39;</span></span>
                <span class='comment'>#@hot.outputs_list &lt;&lt; Output.new(id, &quot;&quot;, get_attr)
</span>              <span class='kw'>end</span>
              <span class='kw'>if</span> <span class='id identifier rubyid_string'>string</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span> <span class='op'>!=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>PublicIp</span><span class='tstring_end'>&#39;</span></span>
                <span class='comment'>#@hot.outputs_list &lt;&lt; Output.new(id, &quot;&quot;, get_attr)
</span>              <span class='kw'>end</span>
            <span class='kw'>end</span>
          <span class='kw'>end</span>
        <span class='kw'>end</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="unit_converter-instance_method">
  
    #<strong>unit_converter</strong>(value, input_unit, output_unit)  &#x21d2; <tt>Numeric</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Converts a value to another unit</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>value</span>
      
      
        <span class='type'>(<tt>Numeric</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the value to convert</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>input_unit</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="String.html" title="String (class)">String</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the unit to convert from</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>output_unit</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="String.html" title="String (class)">String</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the unit to convert to</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Numeric</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the converted value</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


524
525
526
527
528
529
530
531
532
533
534
535
536
537
538
539
540
541
542
543
544
545</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'hot-generator/models/vnfd_to_hot.rb', line 524</span>

<span class='kw'>def</span> <span class='id identifier rubyid_unit_converter'>unit_converter</span><span class='lparen'>(</span><span class='id identifier rubyid_value'>value</span><span class='comma'>,</span> <span class='id identifier rubyid_input_unit'>input_unit</span><span class='comma'>,</span> <span class='id identifier rubyid_output_unit'>output_unit</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='int'>0</span> <span class='kw'>if</span> <span class='id identifier rubyid_value'>value</span> <span class='op'>==</span> <span class='int'>0</span>
  <span class='kw'>return</span> <span class='id identifier rubyid_value'>value</span> <span class='kw'>if</span> <span class='id identifier rubyid_input_unit'>input_unit</span><span class='period'>.</span><span class='id identifier rubyid_downcase'>downcase</span> <span class='op'>==</span> <span class='id identifier rubyid_output_unit'>output_unit</span><span class='period'>.</span><span class='id identifier rubyid_downcase'>downcase</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_input_unit'>input_unit</span><span class='period'>.</span><span class='id identifier rubyid_downcase'>downcase</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>gb</span><span class='tstring_end'>&#39;</span></span>
    <span class='kw'>if</span> <span class='id identifier rubyid_output_unit'>output_unit</span><span class='period'>.</span><span class='id identifier rubyid_downcase'>downcase</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>mb</span><span class='tstring_end'>&#39;</span></span>
      <span class='kw'>return</span> <span class='id identifier rubyid_value'>value</span> <span class='op'>*</span> <span class='int'>1024</span>
    <span class='kw'>end</span>
  <span class='kw'>else</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_input_unit'>input_unit</span><span class='period'>.</span><span class='id identifier rubyid_downcase'>downcase</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>mb</span><span class='tstring_end'>&#39;</span></span>
      <span class='kw'>if</span> <span class='id identifier rubyid_output_unit'>output_unit</span><span class='period'>.</span><span class='id identifier rubyid_downcase'>downcase</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>gb</span><span class='tstring_end'>&#39;</span></span>
        <span class='kw'>return</span> <span class='id identifier rubyid_value'>value</span> <span class='op'>/</span> <span class='int'>1024</span>
      <span class='kw'>end</span>
    <span class='kw'>else</span>
      <span class='kw'>if</span> <span class='id identifier rubyid_input_unit'>input_unit</span><span class='period'>.</span><span class='id identifier rubyid_downcase'>downcase</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>tb</span><span class='tstring_end'>&#39;</span></span>
        <span class='kw'>if</span> <span class='id identifier rubyid_output_unit'>output_unit</span><span class='period'>.</span><span class='id identifier rubyid_downcase'>downcase</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>gb</span><span class='tstring_end'>&#39;</span></span>
          <span class='kw'>return</span> <span class='id identifier rubyid_value'>value</span> <span class='op'>*</span> <span class='int'>1024</span>
        <span class='kw'>end</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

      <div id="footer">
  Generated on Mon Oct 10 15:35:23 2016 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.5 (ruby-2.3.0).
</div>

    </div>
  </body>
</html>